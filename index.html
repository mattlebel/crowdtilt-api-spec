<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crowdtilt API</title>
    
    <link rel="stylesheet" type="text/css" href="http://documentup.com/stylesheets/screen.css">
    
    

    

    <!-- Typekit -->
    
      <script type="text/javascript">
        (function() {
          var config = {
            kitId: 'hjp0pft',
            scriptTimeout: 3000
          };
          var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/( |^)wf-loading( |$)/g,"");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script");tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(a&&a!="complete"&&a!="loaded")return;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
        })();
      </script>
    
  </head>
  <body><div id="container">
  <div id="nav">
    
      <div id="header">
        <a href="#" id="logo">Crowdtilt API</a>
      </div>
    
    <ul id="sections">
      
        <li>
          <a href="#introduction">Introduction</a>
          
        </li>
      
        <li>
          <a href="#security">Security</a>
          
        </li>
      
        <li>
          <a href="#use-cases">Use Cases</a>
          
        </li>
      
        <li>
          <a href="#getting-started">Getting Started</a>
          
            <ul>
              
                <li>
                  <a href="#getting-started/sandbox-environment">Sandbox Environment</a>
                </li>
              
                <li>
                  <a href="#getting-started/authentication">Authentication</a>
                </li>
              
                <li>
                  <a href="#getting-started/data-formats">Data Formats</a>
                </li>
              
                <li>
                  <a href="#getting-started/client-libraries">Client Libraries</a>
                </li>
              
                <li>
                  <a href="#getting-started/hackers-support">Hackers Support</a>
                </li>
              
                <li>
                  <a href="#getting-started/getting-involved">Getting involved</a>
                </li>
              
                <li>
                  <a href="#getting-started/when-is-feature-x-going-to-be-in-production">When is feature X going to be in production?</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#user-resources">User Resources</a>
          
        </li>
      
        <li>
          <a href="#users">Users</a>
          
            <ul>
              
                <li>
                  <a href="#users/create-user">Create User</a>
                </li>
              
                <li>
                  <a href="#users/verify-user">Verify User</a>
                </li>
              
                <li>
                  <a href="#users/authenticate-user">Authenticate User</a>
                </li>
              
                <li>
                  <a href="#users/get-user">Get User</a>
                </li>
              
                <li>
                  <a href="#users/list-users">List Users</a>
                </li>
              
                <li>
                  <a href="#users/update-user">Update User</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#user-campaigns">User Campaigns</a>
          
            <ul>
              
                <li>
                  <a href="#user-campaigns/get-user-campaigns">Get User Campaigns</a>
                </li>
              
                <li>
                  <a href="#user-campaigns/get-user-campaign">Get User Campaign</a>
                </li>
              
                <li>
                  <a href="#user-campaigns/get-user-paid-campaigns">Get User Paid Campaigns</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#user-cards">User Cards</a>
          
            <ul>
              
                <li>
                  <a href="#user-cards/create-user-card">Create User Card</a>
                </li>
              
                <li>
                  <a href="#user-cards/get-user-card">Get User Card</a>
                </li>
              
                <li>
                  <a href="#user-cards/list-user-cards">List User Cards</a>
                </li>
              
                <li>
                  <a href="#user-cards/update-user-card">Update User Card</a>
                </li>
              
                <li>
                  <a href="#user-cards/delete-user-card">Delete User Card</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#user-banks">User Banks</a>
          
            <ul>
              
                <li>
                  <a href="#user-banks/create-user-bank">Create User Bank</a>
                </li>
              
                <li>
                  <a href="#user-banks/get-user-bank">Get User Bank</a>
                </li>
              
                <li>
                  <a href="#user-banks/make-user-bank-default">Make User Bank Default</a>
                </li>
              
                <li>
                  <a href="#user-banks/get-user-s-default-bank">Get User's Default Bank</a>
                </li>
              
                <li>
                  <a href="#user-banks/list-user-banks">List User Banks</a>
                </li>
              
                <li>
                  <a href="#user-banks/update-user-bank">Update User Bank</a>
                </li>
              
                <li>
                  <a href="#user-banks/delete-user-bank">Delete User Bank</a>
                </li>
              
                <li>
                  <a href="#user-banks/response-codes">Response Codes</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#user-payments">User Payments</a>
          
            <ul>
              
                <li>
                  <a href="#user-payments/list-user-payments">List User Payments</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#campaign-resources">Campaign Resources</a>
          
        </li>
      
        <li>
          <a href="#campaigns">Campaigns</a>
          
            <ul>
              
                <li>
                  <a href="#campaigns/create-campaign">Create Campaign</a>
                </li>
              
                <li>
                  <a href="#campaigns/get-campaign">Get Campaign</a>
                </li>
              
                <li>
                  <a href="#campaigns/list-campaigns">List campaigns</a>
                </li>
              
                <li>
                  <a href="#campaigns/update-campaign">Update Campaign</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#campaign-payments">Campaign Payments</a>
          
            <ul>
              
                <li>
                  <a href="#campaign-payments/create-campaign-payment">Create campaign payment</a>
                </li>
              
                <li>
                  <a href="#campaign-payments/get-campaign-payment">Get campaign payment</a>
                </li>
              
                <li>
                  <a href="#campaign-payments/update-campaign-payment">Update campaign payment</a>
                </li>
              
                <li>
                  <a href="#campaign-payments/get-campaign-payments">Get campaign payments</a>
                </li>
              
                <li>
                  <a href="#campaign-payments/get-rejected-payments">Get rejected payments</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#refunds">Refunds</a>
          
            <ul>
              
                <li>
                  <a href="#refunds/refund-a-payment">Refund a payment</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#campaign-settlements">Campaign Settlements</a>
          
            <ul>
              
                <li>
                  <a href="#campaign-settlements/list-campaign-settlements">List Campaign Settlements</a>
                </li>
              
                <li>
                  <a href="#campaign-settlements/get-campaign-settlement">Get Campaign Settlement</a>
                </li>
              
                <li>
                  <a href="#campaign-settlements/update-campaign-settlement-bank">Update Campaign Settlement Bank</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#campaign-comments">Campaign Comments</a>
          
            <ul>
              
                <li>
                  <a href="#campaign-comments/create-campaign-comment">Create Campaign Comment</a>
                </li>
              
                <li>
                  <a href="#campaign-comments/get-campaign-comments">Get Campaign Comments</a>
                </li>
              
                <li>
                  <a href="#campaign-comments/get-campaign-comment">Get campaign comment</a>
                </li>
              
                <li>
                  <a href="#campaign-comments/update-campaign-comment">Update campaign comment</a>
                </li>
              
                <li>
                  <a href="#campaign-comments/delete-a-comment">Delete a comment</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#api-examples">API Examples</a>
          
            <ul>
              
                <li>
                  <a href="#api-examples/create-a-user">Create a User</a>
                </li>
              
                <li>
                  <a href="#api-examples/create-a-campaign">Create a campaign</a>
                </li>
              
                <li>
                  <a href="#api-examples/create-a-card">Create a card</a>
                </li>
              
                <li>
                  <a href="#api-examples/create-a-payment">Create a payment</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#tokenizing-sensitive-user-information">Tokenizing Sensitive User Information</a>
          
            <ul>
              
                <li>
                  <a href="#tokenizing-sensitive-user-information/include-the-library">Include the Library</a>
                </li>
              
                <li>
                  <a href="#tokenizing-sensitive-user-information/initialize-the-crowdtilt-object">Initialize the crowdtilt object</a>
                </li>
              
                <li>
                  <a href="#tokenizing-sensitive-user-information/make-sure-to-create-users-first">Make sure to create users first</a>
                </li>
              
                <li>
                  <a href="#tokenizing-sensitive-user-information/create-a-credit-card">Create a Credit Card</a>
                </li>
              
                <li>
                  <a href="#tokenizing-sensitive-user-information/handling-the-response">Handling the Response</a>
                </li>
              
                <li>
                  <a href="#tokenizing-sensitive-user-information/create-a-bank-account">Create a Bank Account</a>
                </li>
              
                <li>
                  <a href="#tokenizing-sensitive-user-information/client-side-validation-helpers">Client-side Validation Helpers</a>
                </li>
              
                <li>
                  <a href="#tokenizing-sensitive-user-information/tokenization-examples">Tokenization Examples</a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#resource-definitions">Resource Definitions</a>
          
        </li>
      
        <li>
          <a href="#user-definition">User Definition</a>
          
        </li>
      
        <li>
          <a href="#bank-definition">Bank Definition</a>
          
        </li>
      
        <li>
          <a href="#campaign-definition">Campaign Definition</a>
          
        </li>
      
        <li>
          <a href="#payment-definition">Payment Definition</a>
          
        </li>
      
        <li>
          <a href="#settlement-definition">Settlement Definition</a>
          
        </li>
      
    </ul>
    
    
  </div>
  <div id="content">
    
    <p><img src="http://f9b43d4100c64ffefa80-01a69cdaa3d52fbca65973574eec9d29.r21.cf2.rackcdn.com/ct_logo.png" alt="Crowdtilt">

</p>
<h1>Crowdtilt API Specs (BETA)</h1>
<p>The Crowdtilt API opens up the opportunity for developers to:

</p>
<ul>
<li>Offer a group payments option in their applications.</li>
<li>Offer a pre-sales commerce option in their applications.</li>
<li>Develop a crowdfunding application (i.e., single project model like Lockitron
  or multi-project model like Kickstarter).</li>
<li>Develop a social fundraising application.</li>
<li>Enable the collaboration around these styles of commerce.</li>
</ul>
<p>What we think is cool about the Crowdtilt API:

</p>
<ul>
<li>Developers can use the Crowdtilt API with their own payment processor
  as it works with <a href="https://stripe.com/">Stripe</a>,
  <a href="https://www.balancedpayments.com/">Balanced</a>,
  <a href="https://www.braintreepayments.com">BrainTree</a>.</li>
<li>Though we have the above preferred partners for the Crowdtilt API already
  built out and ready to use, our API is actually built around our universal
  payments interface, which allows developers to integrate any payment
  processor from around the world right into our system.  For more information
  about how to get access to this interface to build support for your favorite
  processor, drop us a note at <a href="mailto:devs@crowdtilt.com">devs@crowdtilt.com</a>.</li>
<li>The API also works with credit cards and ACH debit payments or a combination
  of these.</li>
<li>The API provides collaboration tools such as commenting/updates, nested
  comments, messaging, notifications, and tracking of those that have paid and
  those that haven&#39;t.</li>
<li>The API supports both multiple currencies and international languages.</li>
<li>We also provide a tool to tokenize the sensitive information you collect (credit card 
and bank account numbers), so you don&#39;t have to worry about PCI compliance</li>
</ul>
<h1>Menu</h1>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#security">Security</a></li>
<li><a href="#use-cases">Use-Cases</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#user-resources">User Resources</a><ul>
<li><a href="#users">Users</a></li>
<li><a href="#user-campaigns">User Campaigns</a></li>
<li><a href="#user-cards">User Cards</a></li>
<li><a href="#user-banks">User Banks</a></li>
<li><a href="#user-payments">User Payments</a></li>
</ul>
</li>
<li><a href="#campaign-resources">Campaign Resources</a><ul>
<li><a href="#campaigns">Campaigns</a></li>
<li><a href="#campaign-payments">Campaign Payments</a></li>
<li><a href="#rejected-payments">Rejected Payments</a></li>
<li><a href="#refunds">Refunds</a></li>
<li><a href="#campaign-settlements">Campaign Settlements</a></li>
<li><a href="#campaign-comments">Campaign Comments</a>   </li>
</ul>
</li>
<li><a href="#api-examples">API Examples</a></li>
<li><a href="#tokenizing-sensitive-user-information">Tokenizing Sensitive User Information</a></li>
<li><a href="#resource-definitions">Resource Definitions</a><ul>
<li><a href="#user-definition">User Definition</a></li>
<li><a href="#campaign-definition">Campaign Definition</a></li>
<li><a href="#payment-definition">Payment Definition</a></li>
<li><a href="#settlement-definition">Settlement Definition</a></li>
</ul>
</li>
<li><a href="#pagination">Pagination</a></li>
</ul>
<h2 id='introduction'>Introduction</h2 id='introduction'>
<p>It is important to understand that the Crowdtilt API is a layer of abstraction
on top payment processors. Currently, we support Balanced, which is recommended
for multi-project services such as Kickstarter. We also support Stripe, which is
suitable for single-project services such as Lockitron. Finally, we support
Braintree, which is highly suitable for international projects.

</p>
<p>When interacting with a payment gateway, the focus is highly transactional and
payment-based.  We consider a payment to be simply a part of a whole.  Our API
helps you focus on the whole.

</p>
<p>The API defines 3 main objects: <code>campaign</code>, <code>user</code>, and <code>payment</code>. At a
very high-level, a <code>campaign</code> represents a monetary goal that one or more
<code>users</code> try to achieve through <code>payments</code>. The campaign can define multiple
payment policies such as <code>fixed payments</code>, e.g, tickets, or <code>variable
payments</code>, e.g., donations.

</p>
<p><code>Payments</code> are simply a way for users to achieve the campaign goal. We believe
that a good crowdfunding service should support any type of payment. Therefore,
we are working on supporting as many payment methods as possible. Currently, we
support credit cards and ACH debits.

</p>
<p>When the campaign is created, it has to have at least one <code>user</code> to act as the
owner or the campaign admin. Once the campaign goal is achieved, the money is
sent to the campaign admin according to the policies defined when the campaign
was created.

</p>
<p>Here is a full definition for each one of those objects:
<a href="#campaign-definition">campaign</a>, <a href="#user-definition">user</a>,
<a href="#payment-definition">payment</a>.


</p>
<h2 id='security'>Security</h2 id='security'>
<p>Crowdtilt is fully PCI compliant and security is of paramount importance to our
team. Crowdtilt forces HTTPS for all services, including our public website. All
data is stored in a Payment Industry Data Security Standard (PCI DSS)
Compliant environment.

</p>
<p>Crowdtilt provides a PCI-compliant javascript library, <code>crowdtilt.js</code>,
which is easy to implement on your website. Sensitive payment information can
then be securely collected without ever touching your servers, keeping you
completely outside of PCI and regulatory scope. See 
<a href="#tokenizing-sensitive-user-information">Tokenizing Sensitive User Information</a> 
for more information.

</p>
<p>We investigate all reported security issues with extreme immediacy. If you
believe you&#39;ve found any security issues, please email us at
<a href="mailto:security@crowdtilt.com">security@crowdtilt.com</a>. Though usually faster,
we guarantee a direct response within 24 hours. We ask that you do not
disclose a security bug publicly until it has been addressed by our team.


</p>
<h2 id='use-cases'>Use Cases</h2 id='use-cases'>
<p>The Crowdtilt API can be used in a single-project environment (i.e.
<a href="http://www.app.net">app.net</a>/<a href="http://www.lockitron.com">lockitron.com</a>),
a multi-project environment (a la <a href="http://www.kickstarter.com">Kickstarter</a>),
or for simple Group Payments.  This includes things like group vacation
bookings/rentals, wedding gifts, bachelor parties, and the list goes on.
We know we&#39;re only scratching the surface of what can be done with this API,
and we&#39;re sure our users will find countless other creative and clever ways
to utilize our API.

</p>
<p>We have friends looking to use our API to build a Mission-Trip focused,
non-profit crowdfunding platform, and other developers interested in building
a bill-splitting mobile application.  If you have any questions about how
your use-case or idea could utilize our API, don&#39;t hesitate to
<a href="mailto:support.api@crowdtilt.com">ask</a>!


</p>
<h2 id='getting-started'>Getting Started</h2 id='getting-started'>
<p>The first step is to get an <code>API_KEY</code> and <code>API_SECRET</code>. During our beta
program, please contact
<a href="mailto:support.api@crowdtilt.com?Subject=API%20Creds">support.api@crowdtilt.com</a>
to request these.  Once you receive your Crowdtilt API credentials, you are
ready to use the API.  Remember that all API requests have to go over SSL.


</p>
<h3 id='getting-started/sandbox-environment'>Sandbox Environment</h3 id='getting-started/sandbox-environment'>
<p>To help you build your application, we provide a sandbox environment that you
can use for testing. Use the base URI below:

</p>
<pre><code><span class="label">https:</span>//api-sandbox<span class="preprocessor">.crowdtilt</span><span class="preprocessor">.com</span>/v1</code></pre>
<p>The sandbox environment will be configured with a free Balanced account. If
you need support for a different payment processor, please
<a href="mailto:support.api@crowdtilt.com?Subject=API%20Payment%20Processor%20Sandbox">let us know</a>.


</p>
<h3 id='getting-started/authentication'>Authentication</h3 id='getting-started/authentication'>
<p>We are big fans of simplicity. Therefore, we support <code>Basic Authentication</code>
over SSL. You can simply use <code>curl</code> to test our API in 2 seconds.

</p>
<pre><code>$ curl -u API_KEY:API_SECRET https://api-sandbox<span class="preprocessor">.crowdtilt</span><span class="preprocessor">.com</span>/v1</code></pre>
<p>If the credentials provided were invalid, the API will respond with

</p>
<pre><code><span class="setting">401 =<span class="value">> Unauthorized</span></span></code></pre>
<h3 id='getting-started/data-formats'>Data Formats</h3 id='getting-started/data-formats'>
<p>Currently, we only support JSON data formats. If you think we should support
other data formats, please let us know what and why
<a href="mailto:support.api@crowdtilt.com?Subject=Data%20Formats">support.api@crowdtilt.com</a>.


</p>
<h3 id='getting-started/client-libraries'>Client Libraries</h3 id='getting-started/client-libraries'>
<p>Unfortunately, we don&#39;t have client libraries, yet. If you write one, let us
know and we&#39;ll link to it.


</p>
<h3 id='getting-started/hackers-support'>Hackers Support</h3 id='getting-started/hackers-support'>
<p>We like hanging out on IRC, a lot. Feel free to come hang out with us #crowdtilt
at freenode. You can also send an email to
<a href="mailto:support.api@crowdtilt.com">support.api@crowdtilt.com</a>.


</p>
<h3 id='getting-started/getting-involved'>Getting involved</h3 id='getting-started/getting-involved'>
<p>We need your help and we would love to get you involved. Feel free to create
github issues, give feedback and comment, submit pull requests, or
review specs. You can even ask for new features and vote on the ones you like to
be a higher priority.


</p>
<h3 id='getting-started/when-is-feature-x-going-to-be-in-production'>When is feature X going to be in production?</h3 id='getting-started/when-is-feature-x-going-to-be-in-production'>
<p>Any proposed spec change will be in a separate &quot;feature&quot; branch. Once we have a
consensus from the community on the spec change, it&#39;ll be merged into <code>dev</code>
branch, which means that the <a href="https://www.crowdtilt.com"
target="_blank">Crowdtilt</a> team will start working on it. Once it is fully
implemented and ready to go to production, it&#39;ll get merged to the <code>master</code>
branch.


</p>
<h2 id='user-resources'>User Resources</h2 id='user-resources'>
<ul>
<li><a href="#users">Users</a></li>
<li><a href="#user-campaigns">User Campaigns</a></li>
<li><a href="#user-cards">User Cards</a></li>
<li><a href="#user-banks">User Banks</a></li>
<li><a href="#user-payments">User Payments</a></li>
</ul>
<table>
    <thead>
        <tr>
            <th>Path</th>
            <th>HTTP Methods</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>/users</td>
            <td>
                <a href="#list-users">GET</a>
                <a href="#create-user">POST</a> </td>
            <td> List of users </td>
        </tr>
        <tr>
            <td>/users/authentication</td>
            <td>
                <a href="#authenticate-user">GET</a>
            </td>
            <td> Authenticate a user</td>
        </tr>
        <tr>
            <td>/users/:id</td>
            <td>
                <a href="#get-user">GET</a>
                <a href="#update-user">PUT</a>
            </td>
            <td> A specific user </td>
        </tr>
        <tr>
            <td>/users/:id/verification</td>
            <td>
                <a href="#verify-user">POST</a>
            </td>
            <td> Verify a user to receive payments </td>
        </tr>
        <tr>
            <td>/users/:id/campaigns</td>
            <td>
                <a href="#get-user-campaigns">GET</a>
            </td>
            <td> All campaigns the user is involved with </td>
        </tr>
        <tr>
            <td>/users/:id/paid_campaigns</td>
            <td>
                <a href="#get-user-paid-campaigns">GET</a>
            </td>
            <td> Campaigns this user paid for </td>
        </tr>
        <tr>
            <td>/users/:id/cards</td>
            <td>
                <a href="#list-user-cards">GET</a>
                <a href="#create-user-card">POST</a>
            </td>
            <td>User credit cards</td>
        </tr>
        <tr>
            <td>/users/:id/cards/:id</td>
            <td>
                <a href="#get-user-card">GET</a>
                <a href="#update-user-card">PUT</a>
                <a href="#delete-user-card">DELETE</a>
            </td>
            <td>A specific credit card</td>
        </tr>
        <tr>
            <td>/users/:id/banks</td>
            <td>
                <a href="#list-user-banks">GET</a>
                <a href="#create-user-bank">POST</a>
            </td>
            <td>User bank accounts</td>
        </tr>
        <tr>
            <td>/users/:id/banks/:id</td>
            <td>
                <a href="#get-user-bank">GET</a>
                <a href="#update-user-bank">PUT</a>
                <a href="#delete-user-bank">DELETE</a>
            </td>
            <td>A specific bank account</td>
        </tr>
        <tr>
            <td>/users/:id/payments</td>
            <td>
                <a href="#list-user-payments">GET</a>
            </td>
            <td> A list of Users payments</td>
        </tr>
    </tbody>
</table>

<h2 id='users'>Users</h2 id='users'>
<h3 id='users/create-user'>Create User</h3 id='users/create-user'>
<pre><code><span class="title">POST</span> /users

$ curl -X POST -H Content-Type:application/json \
-u key:secret <span class="url">https://api-sandbox.crowdtilt.com/v1/users</span> \
-d<span class="string">'
{
   "user" : {
      "firstname" : "foo",
      "lastname" : "bar",
      "email" : "user<span class="variable">@example</span>.com"
   }
}'</span></code></pre>
<h4>Response Body</h4>
<pre><code>{
    "<span class="attribute">user</span>": <span class="value">{
        "<span class="attribute">id</span>": <span class="value"><span class="string">"USREC5"</span></span>,
        "<span class="attribute">email</span>": <span class="value"><span class="string">"foo.bar@gmail.com"</span></span>,
        "<span class="attribute">firstname</span>": <span class="value"><span class="string">"Foo"</span></span>,
        "<span class="attribute">lastname</span>": <span class="value"><span class="string">"Bar"</span></span>,
        "<span class="attribute">is_verified</span>": <span class="value"><span class="number">0</span></span>,
        "<span class="attribute">img</span>": <span class="value"><span class="string">"https://example.com/profile.png"</span></span>,
        "<span class="attribute">creation_date</span>": <span class="value"><span class="string">"2011-07-02T14:20:48Z"</span></span>,
        "<span class="attribute">last_login_date</span>": <span class="value"><span class="string">"2012-09-22T01:55:49Z"</span></span>,
        "<span class="attribute">uri</span>": <span class="value"><span class="string">"/v1/users/USREC5"</span></span>,
        "<span class="attribute">campaigns_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/campaigns"</span></span>,
        "<span class="attribute">paid_campaigns_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/paid_campaigns"</span></span>,
        "<span class="attribute">payments_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/payments"</span></span>,
        "<span class="attribute">metadata</span>": <span class="value">{}
    </span>}
</span>}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">201 =<span class="value">> Created</span></span>
<span class="setting">400 =<span class="value">> Bad Request</span></span></code></pre>
<h3 id='users/verify-user'>Verify User</h3 id='users/verify-user'>
<p>In order for a user to receive money raised from a campaign, the user&#39;s identity
needs to be verified.  A user is verified by <code>POST</code>ing verification data to the
<code>/users/:id/verification</code>.

</p>
<p>The verification data is as follows:

</p>
<ul>
<li><code>name</code> - should be the real name of the user</li>
<li><code>dob</code> - the date of birth of the user in the format YYYY-MM</li>
<li><code>phone_number</code> - the user&#39;s phone number</li>
<li><code>street_address</code> - the user&#39;s street address</li>
<li><code>postal code</code> - the user&#39;s postal code</li>
</ul>
<p>In some cases, if the user cannot be fully verified with this information, we
may return a <code>449</code> response indicating that we need more info.  In these cases
you should re-post the data with the additional <code>ssn</code> field containing the
user&#39;s social security number for additional verification.

</p>
<p>Once the verification has succeeded, <code>is_verified</code> on the user object
will be set to 1 to reflect this change.

</p>
<pre><code><span class="constant">POST</span> /<span class="identifier">users</span>/<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>/<span class="identifier">verification</span>

<span class="variable">$ </span><span class="identifier">curl</span> -<span class="constant">X</span> <span class="constant">POST</span> -<span class="constant">H</span> <span class="constant">Content</span>-<span class="constant">Type</span><span class="symbol">:<span class="identifier">application</span></span>/<span class="identifier">json</span> -<span class="identifier">u</span> <span class="identifier">key</span><span class="symbol">:<span class="identifier">secret</span></span> \
<span class="identifier">https</span><span class="symbol">:</span>/<span class="regexp">/api-sandbox.crowdtilt.com/v</span>1/<span class="identifier">users</span>/<span class="constant">USREC5</span>/<span class="identifier">verification</span> \
-<span class="identifier">d</span><span class="string">'
{
   "verification" : {
      "name" : "Khaled Hussein",
      "dob" : "1984-07",
      "phone_number" : "(000) 000-0000",
      "street_address" : "324 awesome address, awesome city, CA",
      "postal_code" : "12345"
   }
}'</span></code></pre>
<h4>Response Body</h4>
<pre><code><span class="rules">{<span class="rule">}</span></span></code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span>
<span class="setting">400 =<span class="value">> Bad Data, or Could not Verify admin information</span></span>
<span class="setting">449 =<span class="value">> Retry with SSN</span></span></code></pre>
<h3 id='users/authenticate-user'>Authenticate User</h3 id='users/authenticate-user'>
<p>To authenticate a user, you can pass in the user&#39;s login credentials, email and
password, as query parameters.

</p>
<pre><code><span class="title">GET</span> /users/authentication?email=user<span class="variable">@example</span>.com&amp;password=mypassword</code></pre>
<h4>Response Body</h4>
<pre><code>{
   "<span class="attribute">user</span>" : <span class="value">{
      "<span class="attribute">id</span>" : <span class="value"><span class="string">"USRB07"</span></span>,
      "<span class="attribute">firstname</span>" : <span class="value"><span class="string">"foo"</span></span>,
      "<span class="attribute">lastname</span>" : <span class="value"><span class="string">"bar"</span></span>,
      "<span class="attribute">img</span>" : <span class="value"><span class="literal">null</span></span>,
      "<span class="attribute">email</span>" : <span class="value"><span class="string">"user@example.com"</span></span>,
      "<span class="attribute">is_verified</span>" : <span class="value"><span class="number">0</span></span>,
      "<span class="attribute">creation_date</span>" : <span class="value"><span class="string">"2012-09-26T10:22:03.900529000Z"</span></span>,
      "<span class="attribute">last_login_date</span>" : <span class="value"><span class="string">"2012-09-26T17:22:20Z"</span>
   </span>}
</span>}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">302 =<span class="value">> Found</span></span>
<span class="setting">401 =<span class="value">> Unauthorized</span></span></code></pre>
<h3 id='users/get-user'>Get User</h3 id='users/get-user'>
<pre><code>GET  /users/:id

$ curl -u key:secret \
<span class="label">https:</span>//api-sandbox<span class="preprocessor">.crowdtilt</span><span class="preprocessor">.com</span>/v1/users/USREC5</code></pre>
<h4>Response Body</h4>
<pre><code>{
    "<span class="attribute">user</span>": <span class="value">{
        "<span class="attribute">id</span>": <span class="value"><span class="string">"USREC5"</span></span>,
        "<span class="attribute">email</span>": <span class="value"><span class="string">"foo.bar@gmail.com"</span></span>,
        "<span class="attribute">firstname</span>": <span class="value"><span class="string">"Foo"</span></span>,
        "<span class="attribute">lastname</span>": <span class="value"><span class="string">"Bar"</span></span>,
        "<span class="attribute">is_verified</span>": <span class="value"><span class="number">1</span></span>,
        "<span class="attribute">img</span>": <span class="value"><span class="string">"https://example.com/profile.png"</span></span>,
        "<span class="attribute">creation_date</span>": <span class="value"><span class="string">"2011-07-02T14:20:48Z"</span></span>,
        "<span class="attribute">last_login_date</span>": <span class="value"><span class="string">"2012-09-22T01:55:49Z"</span></span>,
        "<span class="attribute">uri</span>": <span class="value"><span class="string">"/v1/users/USREC5"</span></span>,
        "<span class="attribute">campaigns_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/campaigns"</span></span>,
        "<span class="attribute">paid_campaigns_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/paid_campaigns"</span></span>,
        "<span class="attribute">payments_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/payments"</span></span>,
        "<span class="attribute">metadata</span>": <span class="value">{}
    </span>}
</span>}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='users/list-users'>List Users</h3 id='users/list-users'>
<pre><code><span class="title">GET</span> /users

$ curl -u key:secret <span class="url">https://api-sandbox.crowdtilt.com/v1/users</code></pre>
<h4>Response Body</h4>
<pre><code>{
    "<span class="attribute">pagination</span>": <span class="value">{
        "<span class="attribute">total_pages</span>": <span class="value"><span class="number">1</span></span>,
        "<span class="attribute">page</span>": <span class="value"><span class="number">1</span></span>,
        "<span class="attribute">total_entries</span>": <span class="value"><span class="number">2</span></span>,
        "<span class="attribute">per_page</span>": <span class="value"><span class="number">50</span>
    </span>}</span>,
    "<span class="attribute">users</span>": <span class="value">[
        {
            "<span class="attribute">id</span>": <span class="value"><span class="string">"USREC5"</span></span>,
            "<span class="attribute">email</span>": <span class="value"><span class="string">"foo.bar@gmail.com"</span></span>,
            "<span class="attribute">firstname</span>": <span class="value"><span class="string">"Foo"</span></span>,
            "<span class="attribute">lastname</span>": <span class="value"><span class="string">"Bar"</span></span>,
            "<span class="attribute">is_verified</span>": <span class="value"><span class="number">0</span></span>,
            "<span class="attribute">img</span>": <span class="value"><span class="string">"https://example.com/profile.png"</span></span>,
            "<span class="attribute">creation_date</span>": <span class="value"><span class="string">"2011-07-02T14:20:48Z"</span></span>,
            "<span class="attribute">last_login_date</span>": <span class="value"><span class="string">"2012-09-22T01:55:49Z"</span></span>,
            "<span class="attribute">uri</span>": <span class="value"><span class="string">"/v1/users/USREC5"</span></span>,
            "<span class="attribute">campaigns_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/campaigns"</span></span>,
            "<span class="attribute">paid_campaigns_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/paid_campaigns"</span></span>,
            "<span class="attribute">payments_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/payments"</span></span>,
            "<span class="attribute">metadata</span>": <span class="value">{}
        </span>},
        .
        .
        .
    ]
</span>}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='users/update-user'>Update User</h3 id='users/update-user'>
<p>Currently, this request supports partial PUTs. For example, you can do a request
to update a single attribute without having to send the full
<a href="#user-definition">user object</a>.

</p>
<pre><code><span class="constant">PUT</span> /<span class="identifier">users</span>/<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>

<span class="variable">$ </span><span class="identifier">curl</span> -<span class="constant">X</span> <span class="constant">PUT</span> -<span class="constant">HContent</span>-<span class="constant">Type</span><span class="symbol">:<span class="identifier">application</span></span>/<span class="identifier">json</span> -<span class="identifier">u</span> <span class="identifier">key</span><span class="symbol">:<span class="identifier">secret</span></span> \
<span class="identifier">https</span><span class="symbol">:</span>/<span class="regexp">/api-sandbox.crowdtilt.com/v</span>1/<span class="identifier">users</span>/<span class="constant">USREC5</span> \
-<span class="identifier">d</span><span class="string">'
{
    "user": {
        "lastname": "new last name"
    }
}'</span></code></pre>
<h4>Response Body</h4>
<pre><code>{
    "<span class="attribute">user</span>": <span class="value">{
        "<span class="attribute">id</span>": <span class="value"><span class="string">"USREC5"</span></span>,
        "<span class="attribute">email</span>": <span class="value"><span class="string">"foo.bar@gmail.com"</span></span>,
        "<span class="attribute">firstname</span>": <span class="value"><span class="string">"Foo"</span></span>,
        "<span class="attribute">lastname</span>": <span class="value"><span class="string">"new last name"</span></span>,
        "<span class="attribute">is_verified</span>": <span class="value"><span class="number">0</span></span>,
        "<span class="attribute">img</span>": <span class="value"><span class="string">"https://example.com/profile.png"</span></span>,
        "<span class="attribute">creation_date</span>": <span class="value"><span class="string">"2011-07-02T14:20:48Z"</span></span>,
        "<span class="attribute">last_login_date</span>": <span class="value"><span class="string">"2012-09-22T01:55:49Z"</span></span>,
        "<span class="attribute">uri</span>": <span class="value"><span class="string">"/v1/users/USREC5"</span></span>,
        "<span class="attribute">campaigns_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/campaigns"</span></span>,
        "<span class="attribute">paid_campaigns_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/paid_campaigns"</span></span>,
        "<span class="attribute">payments_uri</span>": <span class="value"><span class="string">"/v1/users/USREC5/payments"</span></span>,
        "<span class="attribute">metadata</span>": <span class="value">{}
    </span>}
</span>}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h2 id='user-campaigns'>User Campaigns</h2 id='user-campaigns'>
<h3 id='user-campaigns/get-user-campaigns'>Get User Campaigns</h3 id='user-campaigns/get-user-campaigns'>
<p>This resource returns all the campaigns that the user has created as well as the
campaigns that he paid for.

</p>
<pre><code>GET /users/:id/campaigns

$ curl -u key:secret \
<span class="label">https:</span>//api-sandbox<span class="preprocessor">.crowdtilt</span><span class="preprocessor">.com</span>/v1/users/USREC5/campaigns</code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"pagination"</span>: {
        <span class="string">"total_pages"</span>: <span class="number">0</span>,
        <span class="string">"page"</span>: <span class="number">1</span>,
        <span class="string">"total_entries"</span>: <span class="number">0</span>,
        <span class="string">"per_page"</span>: <span class="number">50</span>
    },
    <span class="string">"campaigns"</span>: [
        {
            <span class="string">"id"</span>: <span class="string">"CMPBDA"</span>,
            <span class="string">"user_id"</span>: <span class="string">"USREC5"</span>,
            <span class="string">"title"</span>: <span class="string">"Campaign Title"</span>,
            <span class="string">"description"</span>: <span class="string">"some description"</span>,
            <span class="string">"privacy"</span>: <span class="number">1</span>,
            <span class="string">"tilt_amount"</span>: <span class="number">100</span>,
            <span class="string">"min_payment_amount"</span>: <span class="number">0</span>,
            <span class="string">"fixed_payment_amount"</span>: <span class="number">0</span>,
            <span class="string">"expiration_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
            <span class="string">"is_tilted"</span>: <span class="number">0</span>,
            <span class="string">"is_paid"</span>: <span class="number">0</span>,
            <span class="string">"is_expired"</span>: <span class="number">0</span>,
            <span class="string">"tax_id"</span>: null,
            <span class="string">"tax_name"</span>: null,
            <span class="string">"uri"</span>: <span class="string">"/v1/campaigns/CMPBDA"</span>,
            <span class="string">"payments_uri"</span>: <span class="string">"/v1/campaigns/CMPBDA/payments"</span>,
            <span class="string">"admin"</span>: { <span class="string">"id"</span>: <span class="string">"USREC5"</span>, <span class="string">"uri"</span>: <span class="string">"/v1/users/USREC5"</span>, <span class="keyword">...</span> },
            <span class="string">"metadata"</span>: { },
            <span class="string">"stats"</span>: {
                <span class="string">"tilt_percent"</span>: <span class="number">0</span>,
                <span class="string">"raised_amount"</span>: <span class="number">0</span>,
                <span class="string">"unique_contributors"</span>: <span class="number">0</span>,
                <span class="string">"number_of_payments"</span>: <span class="number">0</span>
            }
        },
        .
        .
        .
    ]
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='user-campaigns/get-user-campaign'>Get User Campaign</h3 id='user-campaigns/get-user-campaign'>
<p>This resource returns a specific campaign created by this user.

</p>
<pre><code><span class="constant">GET</span> /<span class="identifier">users</span>/<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>/<span class="identifier">campaigns</span>/<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>

<span class="variable">$ </span><span class="identifier">curl</span> -<span class="identifier">u</span> <span class="identifier">key</span><span class="symbol">:<span class="identifier">secret</span></span> \
<span class="identifier">https</span><span class="symbol">:</span>/<span class="regexp">/api-sandbox.crowdtilt.com/v</span>1/<span class="identifier">users</span>/<span class="constant">USREC5</span>/<span class="identifier">campaigns</span>/<span class="constant">CMP96B</span></code></pre>
<h4>Response Body</h4>
<pre><code>{
   <span class="string">"campaign"</span> : {
      <span class="string">"img"</span> : null,
      <span class="string">"metadata"</span> : { },
      <span class="string">"id"</span> : <span class="string">"CMP96B"</span>,
      <span class="string">"is_paid"</span> : <span class="number">0</span>,
      <span class="string">"privacy"</span> : <span class="number">1</span>,
      <span class="string">"is_expired"</span> : <span class="number">1</span>,
      <span class="string">"fixed_payment_amount"</span> : <span class="number">0</span>,
      <span class="string">"tilt_amount"</span> : <span class="number">100</span>,
      <span class="string">"description"</span> : <span class="string">"some description"</span>,
      <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP96B"</span>,
      <span class="string">"creation_date"</span> : <span class="string">"2012-10-19T15:09:01.869085000Z"</span>,
      <span class="string">"first_contributor"</span> : { <span class="string">"id"</span> : <span class="string">"USR123"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR123"</span>, <span class="keyword">...</span> },
      <span class="string">"tilter"</span> : { <span class="string">"id"</span> : <span class="string">"USR456"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR456"</span>, <span class="keyword">...</span> },
      <span class="string">"user_id"</span> : <span class="string">"USR521"</span>,
      <span class="string">"title"</span> : <span class="string">"some title"</span>,
      <span class="string">"modification_date"</span> : <span class="string">"2012-10-19T15:09:01.869085000Z"</span>,
      <span class="string">"stats"</span> : {
         <span class="string">"tilt_percent"</span> : <span class="number">0</span>,
         <span class="string">"raised_amount"</span> : <span class="number">0</span>,
         <span class="string">"unique_contributors"</span> : <span class="number">0</span>,
         <span class="string">"number_of_payments"</span> : <span class="number">0</span>
      },
      <span class="string">"expiration_date"</span> : <span class="string">"2000-01-02T01:02:03Z"</span>,
      <span class="string">"is_tilted"</span> : <span class="number">0</span>,
      <span class="string">"admin"</span>: { <span class="string">"id"</span>: <span class="string">"USREC5"</span>, <span class="keyword">...</span> },
      <span class="string">"min_payment_amount"</span> : <span class="number">0</span>,
      <span class="string">"tax_id"</span> : null,
      <span class="string">"tax_name"</span> : null,
      <span class="string">"payments_uri"</span> : <span class="string">"/v1/campaigns/CMP96B/payments"</span>
   }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='user-campaigns/get-user-paid-campaigns'>Get User Paid Campaigns</h3 id='user-campaigns/get-user-paid-campaigns'>
<p>This resource returns all the campaigns that the user paid for.

</p>
<pre><code>GET /users/:id/paid_campaigns

$ curl -u key:secret \
<span class="label">https:</span>//api-sandbox<span class="preprocessor">.crowdtilt</span><span class="preprocessor">.com</span>/v1/users/USREC5/campaigns/CMP96B</code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"pagination"</span>: {
        <span class="string">"total_pages"</span>: <span class="number">0</span>,
        <span class="string">"page"</span>: <span class="number">1</span>,
        <span class="string">"total_entries"</span>: <span class="number">0</span>,
        <span class="string">"per_page"</span>: <span class="number">50</span>
    },
    <span class="string">"campaigns"</span>: [
        {
            <span class="string">"id"</span>: <span class="string">"CMPBDA"</span>,
            <span class="string">"user_id"</span>: <span class="string">"USREC5"</span>,
            <span class="string">"title"</span>: <span class="string">"Campaign Title"</span>,
            <span class="string">"description"</span>: <span class="string">"some description"</span>,
            <span class="string">"privacy"</span>: <span class="number">1</span>,
            <span class="string">"tilt_amount"</span>: <span class="number">100</span>,
            <span class="string">"min_payment_amount"</span>: <span class="number">0</span>,
            <span class="string">"fixed_payment_amount"</span>: <span class="number">0</span>,
            <span class="string">"expiration_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
            <span class="string">"is_tilted"</span>: <span class="number">0</span>,
            <span class="string">"is_paid"</span>: <span class="number">0</span>,
            <span class="string">"is_expired"</span>: <span class="number">0</span>,
            <span class="string">"tax_id"</span>: null,
            <span class="string">"tax_name"</span>: null,
            <span class="string">"uri"</span>: <span class="string">"/v1/campaigns/CMPBDA"</span>,
            <span class="string">"admin"</span>: { <span class="string">"id"</span>: <span class="string">"USREC5"</span>, <span class="string">"uri"</span>: <span class="string">"/v1/users/USREC5"</span>, <span class="keyword">...</span> },
            <span class="string">"payments_uri"</span>: <span class="string">"/v1/campaigns/CMPBDA/payments"</span>,
            <span class="string">"metadata"</span>: { },
            <span class="string">"stats"</span>: {
                <span class="string">"tilt_percent"</span>: <span class="number">0</span>,
                <span class="string">"raised_amount"</span>: <span class="number">0</span>,
                <span class="string">"unique_contributors"</span>: <span class="number">0</span>,
                <span class="string">"number_of_payments"</span>: <span class="number">0</span>
            }
        },
        .
        .
        .
    ]
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h2 id='user-cards'>User Cards</h2 id='user-cards'>
<h3 id='user-cards/create-user-card'>Create User Card</h3 id='user-cards/create-user-card'>
<pre><code><span class="constant">POST</span> /<span class="identifier">users</span>/<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>/<span class="identifier">cards</span>

<span class="variable">$ </span><span class="identifier">curl</span> -<span class="constant">X</span> <span class="constant">POST</span> -<span class="identifier">u</span> <span class="identifier">key</span><span class="symbol">:<span class="identifier">secret</span></span> -<span class="constant">H</span> <span class="constant">Content</span>-<span class="constant">Type</span><span class="symbol">:<span class="identifier">application</span></span>/<span class="identifier">json</span>\
<span class="identifier">https</span><span class="symbol">:</span>/<span class="regexp">/api-sandbox.crowdtilt.com/v</span>1/<span class="identifier">users</span>/<span class="constant">USR50A</span>/<span class="identifier">cards</span>\
-<span class="identifier">d</span><span class="string">'
{
    "card": {
        "expiration_year":2023,
        "security_code":123,
        "expiration_month":"01",
        "number":"4111111111111111"
    }
}
'</span></code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"cards"</span> : [
          {
             <span class="string">"last_four"</span> : <span class="string">"1111"</span>,
             <span class="string">"expiration_year"</span> : <span class="number">2023</span>,
             <span class="string">"expiration_month"</span> : <span class="string">"01"</span>,
             <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR50A"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR50A"</span>, <span class="keyword">...</span> },
             <span class="string">"uri"</span> : <span class="string">"/v1/users/USR50A/cards/CCP6D6"</span>,
             <span class="string">"card_type"</span> : <span class="string">"VISA card"</span>,
             <span class="string">"creation_date"</span> : <span class="string">"2012-08-23T07:42:46.134467000Z"</span>,
             <span class="string">"metadata"</span> : {},
             <span class="string">"id"</span> : <span class="string">"CCP6D6E7E7C0C5C11E2BD7001E2CFE628C0"</span>
          },
          <span class="keyword">...</span>
      ]
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">201 =<span class="value">> Created</span></span></code></pre>
<h3 id='user-cards/get-user-card'>Get User Card</h3 id='user-cards/get-user-card'>
<pre><code><span class="constant">GET</span> /<span class="identifier">users</span>/<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>/<span class="identifier">cards</span>/<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>

<span class="variable">$ </span><span class="identifier">curl</span> -<span class="identifier">u</span> <span class="identifier">key</span><span class="symbol">:<span class="identifier">secret</span></span> \
<span class="identifier">https</span><span class="symbol">:</span>/<span class="regexp">/api-sandbox.crowdtilt.com/v</span>1/<span class="identifier">users</span>/<span class="constant">USR50A</span>/<span class="identifier">cards</span>/<span class="constant">CCP6D6</span></code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"card"</span>: {
        <span class="string">"last_four"</span> : <span class="string">"1234"</span>,
            <span class="string">"expiration_year"</span> : <span class="number">2034</span>,
            <span class="string">"expiration_month"</span> : <span class="string">"04"</span>,
            <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR50A"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR50A"</span>, <span class="keyword">...</span> },
            <span class="string">"uri"</span> : <span class="string">"/v1/users/USR50A/cards/CCP6D6"</span>,
            <span class="string">"card_type"</span> : null,
            <span class="string">"creation_date"</span> : <span class="string">"2012-08-23T07:42:46.134467000Z"</span>,
            <span class="string">"metadata"</span> : {},
            <span class="string">"id"</span> : <span class="string">"CCP6D6E7E7C0C5C11E2BD7001E2CFE628C0"</span>
    }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='user-cards/list-user-cards'>List User Cards</h3 id='user-cards/list-user-cards'>
<h4>Request</h4>
<pre><code><span class="title">GET</span> /users/:id/cards</code></pre>
<h4>Response Body</h4>
<pre><code>{
    "<span class="attribute">pagination</span>": <span class="value">{
        "<span class="attribute">total_pages</span>": <span class="value"><span class="number">0</span></span>,
        "<span class="attribute">page</span>": <span class="value"><span class="number">1</span></span>,
        "<span class="attribute">total_entries</span>": <span class="value"><span class="number">0</span></span>,
        "<span class="attribute">per_page</span>": <span class="value"><span class="number">50</span>
    </span>}</span>,
    "<span class="attribute">cards</span>": <span class="value">[]
</span>}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='user-cards/update-user-card'>Update User Card</h3 id='user-cards/update-user-card'>
<p>Card information cannot be updated once it is set.  You can however, modify
the <code>metadata</code> of a Card. That is the only thing modifiable with this
request.  Other fields submitted will be ignored.

</p>
<pre><code>PUT /users/:<span class="keyword">id</span>/cards/:<span class="keyword">id</span></code></pre>
<h4>Request Body</h4>
<pre><code>{
    "<span class="attribute">card</span>": <span class="value">{
        "<span class="attribute">metadata</span>" : <span class="value">{
            "<span class="attribute">key1</span>" : <span class="value"><span class="string">"value1"</span>
        </span>}
    </span>}
</span>}</code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"card"</span>: {
        <span class="string">"last_four"</span> : <span class="string">"1234"</span>,
            <span class="string">"expiration_year"</span> : <span class="number">2034</span>,
            <span class="string">"expiration_month"</span> : <span class="string">"04"</span>,
            <span class="string">"user"</span>: { <span class="string">"id"</span>: <span class="string">"USR50A"</span>, <span class="keyword">...</span> },
            <span class="string">"uri"</span> : <span class="string">"/v1/users/USR50A/cards/CCP6D6"</span>,
            <span class="string">"card_type"</span> : null,
            <span class="string">"creation_date"</span> : <span class="string">"2012-08-23T07:42:46.134467000Z"</span>,
            <span class="string">"metadata"</span> : {
                <span class="string">"key1"</span> : <span class="string">"value1"</span>
            },
            <span class="string">"id"</span> : <span class="string">"CCP6D6E7E7C0C5C11E2BD7001E2CFE628C0"</span>
    }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='user-cards/delete-user-card'>Delete User Card</h3 id='user-cards/delete-user-card'>
<pre><code>DELETE /users/:<span class="keyword">id</span>/cards/:<span class="keyword">id</span></code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h2 id='user-banks'>User Banks</h2 id='user-banks'>
<p>Note that the <code>bank_code</code> field is also referred to as a &quot;routing number&quot; in the USA.

</p>
<h3 id='user-banks/create-user-bank'>Create User Bank</h3 id='user-banks/create-user-bank'>
<pre><code><span class="title">POST</span> /users/:id/banks

{
    "bank": {
        "account_number" : "1234567890",
        "name" : "<span class="title">Bank</span> Name<span class="string">",
        "</span>bank_code<span class="string">" : "</span><span class="number">321174851</span><span class="string">",
    }
}</code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"bank"</span>: {
        <span class="string">"account_number_last_four"</span> : <span class="string">"7890"</span>,
        <span class="string">"metadata"</span> : {},
        <span class="string">"id"</span> : <span class="string">"BAP688"</span>,
        <span class="string">"default"</span> : <span class="number">0</span>,
        <span class="string">"name"</span> : <span class="string">"Bank Name"</span>,
        <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR54B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B"</span>, <span class="keyword">...</span> },
        <span class="string">"bank_code_last_four"</span> : <span class="string">"4851"</span>,
        <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B/banks/BAP688"</span>
    }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">201 =<span class="value">> Created</span></span></code></pre>
<h3 id='user-banks/get-user-bank'>Get User Bank</h3 id='user-banks/get-user-bank'>
<pre><code>GET /users/:<span class="keyword">id</span>/banks/:<span class="keyword">id</span></code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"bank"</span> : {
        <span class="string">"account_number_last_four"</span> : <span class="string">"7890"</span>,
        <span class="string">"metadata"</span> : {},
        <span class="string">"id"</span> : <span class="string">"BAP688"</span>,
        <span class="string">"default"</span> : <span class="number">0</span>,
        <span class="string">"name"</span> : <span class="string">"John Doe"</span>,
        <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR54B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B"</span>, <span class="keyword">...</span> },
        <span class="string">"bank_code_last_four"</span> : <span class="string">"4851"</span>,
        <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B/banks/BAP688"</span>
    }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='user-banks/make-user-bank-default'>Make User Bank Default</h3 id='user-banks/make-user-bank-default'>
<p>Before a bank account will be sent money, it must be marked as the default
bank account for that user.  To make a bank account the default, make the
following request:

</p>
<pre><code>POST /users/:<span class="keyword">id</span>/banks/<span class="keyword">default</span>

{
    <span class="string">"bank"</span>: { <span class="string">"id"</span> : <span class="string">"BAP688"</span> }
}</code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"bank"</span>: {
        <span class="string">"account_number_last_four"</span> : <span class="string">"7890"</span>,
        <span class="string">"metadata"</span> : {},
        <span class="string">"default"</span> : <span class="number">1</span>,
        <span class="string">"id"</span> : <span class="string">"BAP688"</span>,
        <span class="string">"name"</span> : <span class="string">"Bank Name"</span>,
        <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR54B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B"</span>, <span class="keyword">...</span> },
        <span class="string">"bank_code_last_four"</span> : <span class="string">"4851"</span>,
        <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B/banks/BAP688"</span>
    }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='user-banks/get-user-s-default-bank'>Get User&#39;s Default Bank</h3 id='user-banks/get-user-s-default-bank'>
<p>To get the current default bank for a user, you can simply request:

</p>
<pre><code>GET /users/:<span class="keyword">id</span>/banks/<span class="keyword">default</span></code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"bank"</span>: {
        <span class="string">"account_number_last_four"</span> : <span class="string">"7890"</span>,
        <span class="string">"metadata"</span> : {},
        <span class="string">"default"</span> : <span class="number">1</span>,
        <span class="string">"id"</span> : <span class="string">"BAP688"</span>,
        <span class="string">"name"</span> : <span class="string">"Bank Name"</span>,
        <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR54B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B"</span>, <span class="keyword">...</span> },
        <span class="string">"bank_code_last_four"</span> : <span class="string">"4851"</span>,
        <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B/banks/BAP688"</span>
    }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='user-banks/list-user-banks'>List User Banks</h3 id='user-banks/list-user-banks'>
<p>This resource lists the bank accounts associated with this user.

</p>
<pre><code><span class="title">GET</span> /users/:id/banks</code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"pagination"</span>: {
        <span class="string">"total_pages"</span>: <span class="number">0</span>,
        <span class="string">"page"</span>: <span class="number">1</span>,
        <span class="string">"total_entries"</span>: <span class="number">0</span>,
        <span class="string">"per_page"</span>: <span class="number">50</span>
    },
    <span class="string">"banks"</span>: [
        {
            <span class="string">"account_number_last_four"</span> : <span class="string">"7890"</span>,
            <span class="string">"metadata"</span> : {},
            <span class="string">"id"</span> : <span class="string">"BAP688"</span>,
            <span class="string">"default"</span> : <span class="number">0</span>,
            <span class="string">"name"</span> : <span class="string">"John Doe"</span>,
            <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR54B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B"</span>, <span class="keyword">...</span> },
            <span class="string">"bank_code_last_four"</span> : <span class="string">"4851"</span>,
            <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B/banks/BAP688"</span>
        }
    ]
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='user-banks/update-user-bank'>Update User Bank</h3 id='user-banks/update-user-bank'>
<p>Bank information cannot be updated once it is set.  You can however, modify
the <code>metadata</code> of a bank account. That is the only thing modifiable with this
request.  Other fields submitted will be ignored.

</p>
<pre><code>PUT /users/:<span class="keyword">id</span>/banks/:<span class="keyword">id</span></code></pre>
<h4>Request Body</h4>
<pre><code>{
    "<span class="attribute">bank</span>" : <span class="value">{
        "<span class="attribute">metadata</span>" : <span class="value">{
            "<span class="attribute">key1</span>" : <span class="value"><span class="string">"value1"</span>
        </span>}
    </span>}
</span>}</code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"bank"</span> : {
        <span class="string">"account_number_last_four"</span> : <span class="string">"7890"</span>,
        <span class="string">"metadata"</span> : {
            <span class="string">"key1"</span> : <span class="string">"value1"</span>
        },
        <span class="string">"id"</span> : <span class="string">"BAP688"</span>,
        <span class="string">"default"</span> : <span class="number">0</span>,
        <span class="string">"name"</span> : <span class="string">"John Doe"</span>,
        <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR54B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B"</span>, <span class="keyword">...</span> },
        <span class="string">"bank_code_last_four"</span> : <span class="string">"4851"</span>,
        <span class="string">"uri"</span> : <span class="string">"/v1/users/USR54B/banks/BAP688"</span>
    }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='user-banks/delete-user-bank'>Delete User Bank</h3 id='user-banks/delete-user-bank'>
<pre><code>DELETE /users/:<span class="keyword">id</span>/banks/:<span class="keyword">id</span></code></pre>
<h3 id='user-banks/response-codes'>Response Codes</h3 id='user-banks/response-codes'>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h2 id='user-payments'>User Payments</h2 id='user-payments'>
<h3 id='user-payments/list-user-payments'>List User Payments</h3 id='user-payments/list-user-payments'>
<pre><code><span class="title">GET</span> /users/:id/payments</code></pre>
<h4>Response Body</h4>
<pre><code>{
    "<span class="attribute">pagination</span>": <span class="value">{
        "<span class="attribute">total_pages</span>": <span class="value"><span class="number">0</span></span>,
        "<span class="attribute">page</span>": <span class="value"><span class="number">1</span></span>,
        "<span class="attribute">total_entries</span>": <span class="value"><span class="number">0</span></span>,
        "<span class="attribute">per_page</span>": <span class="value"><span class="number">50</span>
    </span>}</span>,
    "<span class="attribute">payments</span>": <span class="value">[]
</span>}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h2 id='campaign-resources'>Campaign Resources</h2 id='campaign-resources'>
<ul>
<li><a href="#campaigns">Campaigns</a></li>
<li><a href="#campaign-payments">Campaign Payments</a></li>
<li><a href="#rejected-payments">Rejected Payments</a></li>
<li><a href="#refunds">Refunds</a></li>
<li><a href="#campaign-settlements">Campaign Settlements</a></li>
<li><a href="#campaign-comments">Campaign Comments</a></li>
</ul>
<table>
    <thead>
        <tr>
            <th>Path</th>
            <th>HTTP Methods</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>/campaigns</td>
            <td>
                <a href="#list-campaigns">GET</a>
                <a href="#create-campaign">POST</a>
            </td>
            <td> List of campaigns </td>
        </tr>
        <tr>
            <td>/campaigns/:id</td>
            <td>
                <a href="#get-campaign">GET</a>
                <a href="#update-campaign">PUT</a>
            </td>
            <td> A specific campaign </td>
        </tr>
        <tr>
            <td>/campaigns/:id/payments</td>
            <td>
                <a href="#get-campaign-payments">GET</a>
                <a href="#create-campaign-payment">POST</a>
                <a href="#update-campaign-payment">PUT</a>
            </td>
            <td> Campaign Payments </td>
        </tr>
        <tr>
            <td>/campaigns/:id/rejected_payments</td>
            <td>
                <a href="#get-rejected-payments">GET</a>
            </td>
            <td> Rejected Payments </td>
        </tr>
        <tr>
            <td>/campaigns/:id/payments/:id</td>
            <td>
                <a href="#get-campaign-payment">GET</a>
            </td>
            <td> Details about a specific payment </td>
        </tr>
        <tr>
            <td>/campaigns/:id/payments/:id/refund</td>
            <td>
                <a href="#refund-a-payment">POST</a>
            </td>
            <td> Refunding a specific payment </td>
        </tr>
        <tr>
            <td>/campaigns/:id/settlements</td>
            <td>
                <a href="#get-campaign-settlements">GET</a>
            </td>
            <td> Campaign Settlements </td>
        </tr>
        <tr>
            <td>/campaigns/:id/settlements/:id</td>
            <td>
                <a href="#list-campaign-settlement">GET</a>
            </td>
            <td> Campaign Settlement </td>
        </tr>
        <tr>
            <td>/campaigns/:id/settlements/:id/bank</td>
            <td>
                <a href="#update-campaign-settlement-bank">POST</a>
            </td>
            <td> Update a Campaign Settlement Bank </td>
        </tr>
        <tr>
            <td>/campaigns/:id/comments</td>
            <td>
                <a href="#get-campaign-comments">GET</a>
                <a href="#create-campaign-comment">POST</a>
            </td>
            <td> Campaign Comments </td>
        </tr>
        <tr>
            <td>/campaigns/:id/comments/:id</td>
            <td>
                <a href="#get-campaign-comment">GET</a>
                <a href="#update-campaign-comment">PUT</a>
                <a href="#delete-campaign-comment">DELETE</a>
            </td>
            <td> Details about (or delete) a specific comment </td>
        </tr>
    </tbody>
</table>


<h2 id='campaigns'>Campaigns</h2 id='campaigns'>
<h3 id='campaigns/create-campaign'>Create Campaign</h3 id='campaigns/create-campaign'>
<p>A campaign needs to be associated to a user. We refer to this user as the
&quot;campaign admin&quot;. Campaign admins can create campaigns without having to be
verified. However, they need to be
<a href="#verify-user">verified</a> in order to <a href="#create-user-bank">set up their bank account details</a>
and then be able to receive the money collected in their campaign.

</p>
<pre><code><span class="title">POST</span> /campaigns</code></pre>
<h4>Request Body</h4>
<pre><code>{
    "<span class="attribute">campaign</span>": <span class="value">{
        "<span class="attribute">user_id</span>":<span class="value"><span class="string">"USREC5"</span></span>,
        "<span class="attribute">title</span>":<span class="value"><span class="string">"Campaign Title"</span></span>,
        "<span class="attribute">description</span>":<span class="value"><span class="string">"some description"</span></span>,
        "<span class="attribute">expiration_date</span>":<span class="value"><span class="string">"2000-01-02T01:02:03Z"</span></span>,
        "<span class="attribute">tilt_amount</span>":<span class="value"><span class="number">100</span>
    </span>}
</span>}</code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"campaign"</span>: {
        <span class="string">"id"</span>: <span class="string">"CMPBDA"</span>,
        <span class="string">"user_id"</span>: <span class="string">"USREC5"</span>,
        <span class="string">"title"</span>: <span class="string">"Campaign Title"</span>,
        <span class="string">"description"</span>: <span class="string">"some description"</span>,
        <span class="string">"privacy"</span>: <span class="number">1</span>,
        <span class="string">"type"</span>: <span class="number">1</span>,
        <span class="string">"tilt_amount"</span>: <span class="number">100</span>,
        <span class="string">"min_payment_amount"</span>: <span class="number">0</span>,
        <span class="string">"fixed_payment_amount"</span>: <span class="number">0</span>,
        <span class="string">"expiration_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
        <span class="string">"creation_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
        <span class="string">"modification_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
        <span class="string">"img"</span>: null,
        <span class="string">"is_tilted"</span>: <span class="number">0</span>,
        <span class="string">"is_paid"</span>: <span class="number">0</span>,
        <span class="string">"is_expired"</span>: <span class="number">0</span>,
        <span class="string">"tax_id"</span>: null,
        <span class="string">"tax_name"</span>: null,
        <span class="string">"uri"</span>: <span class="string">"/v1/campaigns/CMPBDA"</span>,
        <span class="string">"admin"</span>: { <span class="string">"id"</span>: <span class="string">"USREC5"</span>, <span class="string">"uri"</span>: <span class="string">"/v1/users/USREC5"</span>, <span class="keyword">...</span> },
        <span class="string">"payments_uri"</span>: <span class="string">"/v1/campaigns/CMPBDA/payments"</span>,
        <span class="string">"metadata"</span>: { },
        <span class="string">"stats"</span>: {
            <span class="string">"tilt_percent"</span>: <span class="number">0</span>,
            <span class="string">"raised_amount"</span>: <span class="number">0</span>,
            <span class="string">"unique_contributors"</span>: <span class="number">0</span>,
            <span class="string">"number_of_payments"</span>: <span class="number">0</span>
        }
    }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">201 =<span class="value">> Created</span></span></code></pre>
<h3 id='campaigns/get-campaign'>Get Campaign</h3 id='campaigns/get-campaign'>
<pre><code><span class="title">GET</span>  /campaigns/:id</code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"campaign"</span>: {
        <span class="string">"id"</span>: <span class="string">"CMPBDA"</span>,
        <span class="string">"user_id"</span>: <span class="string">"USREC5"</span>,
        <span class="string">"title"</span>: <span class="string">"Campaign Title"</span>,
        <span class="string">"description"</span>: <span class="string">"some description"</span>,
        <span class="string">"privacy"</span>: <span class="number">1</span>,
        <span class="string">"type"</span>: <span class="number">1</span>,
        <span class="string">"tilt_amount"</span>: <span class="number">100</span>,
        <span class="string">"min_payment_amount"</span>: <span class="number">0</span>,
        <span class="string">"fixed_payment_amount"</span>: <span class="number">0</span>,
        <span class="string">"expiration_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
        <span class="string">"creation_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
        <span class="string">"modification_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
        <span class="string">"img"</span>: <span class="string">"https://url.to/img.jpg"</span>,
        <span class="string">"is_tilted"</span>: <span class="number">0</span>,
        <span class="string">"is_paid"</span>: <span class="number">0</span>,
        <span class="string">"is_expired"</span>: <span class="number">0</span>,
        <span class="string">"tax_id"</span>: null,
        <span class="string">"tax_name"</span>: null,
        <span class="string">"uri"</span>: <span class="string">"/v1/campaigns/CMPBDA"</span>,
        <span class="string">"admin"</span>: { <span class="string">"id"</span>: <span class="string">"USREC5"</span>, <span class="string">"uri"</span>: <span class="string">"/v1/users/USREC5"</span>, <span class="keyword">...</span> },
        <span class="string">"payments_uri"</span>: <span class="string">"/v1/campaigns/CMPBDA/payments"</span>,
        <span class="string">"metadata"</span>: { },
        <span class="string">"stats"</span>: {
            <span class="string">"tilt_percent"</span>: <span class="number">0</span>,
            <span class="string">"raised_amount"</span>: <span class="number">0</span>,
            <span class="string">"unique_contributors"</span>: <span class="number">0</span>,
            <span class="string">"number_of_payments"</span>: <span class="number">0</span>
        }
    }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='campaigns/list-campaigns'>List campaigns</h3 id='campaigns/list-campaigns'>
<pre><code><span class="title">GET</span> /campaigns</code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"pagination"</span>: {
        <span class="string">"total_pages"</span>: <span class="number">34337</span>,
        <span class="string">"page"</span>: <span class="number">1</span>,
        <span class="string">"total_entries"</span>: <span class="number">1716893</span>,
        <span class="string">"per_page"</span>: <span class="number">50</span>
    },
    <span class="string">"campaigns"</span>: [
        {
            <span class="string">"id"</span>: <span class="string">"CMPBDA"</span>,
            <span class="string">"user_id"</span>: <span class="string">"USREC5"</span>,
            <span class="string">"title"</span>: <span class="string">"Campaign Title"</span>,
            <span class="string">"description"</span>: <span class="string">"some description"</span>,
            <span class="string">"privacy"</span>: <span class="number">1</span>,
            <span class="string">"type"</span>: <span class="number">1</span>,
            <span class="string">"tilt_amount"</span>: <span class="number">100</span>,
            <span class="string">"min_payment_amount"</span>: <span class="number">0</span>,
            <span class="string">"fixed_payment_amount"</span>: <span class="number">0</span>,
            <span class="string">"expiration_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
            <span class="string">"creation_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
            <span class="string">"modification_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
            <span class="string">"img"</span>: <span class="string">"https://url.to/img.jpg"</span>,
            <span class="string">"is_tilted"</span>: <span class="number">0</span>,
            <span class="string">"is_paid"</span>: <span class="number">0</span>,
            <span class="string">"is_expired"</span> : <span class="number">0</span>,
            <span class="string">"tax_id"</span>: null,
            <span class="string">"tax_name"</span>: null,
            <span class="string">"uri"</span>: <span class="string">"/v1/campaigns/CMPBDA"</span>,
            <span class="string">"admin"</span>: { <span class="string">"id"</span>: <span class="string">"USREC5"</span>, <span class="string">"uri"</span>: <span class="string">"/v1/users/USREC5"</span>, <span class="keyword">...</span> },
            <span class="string">"payments_uri"</span>: <span class="string">"/v1/campaigns/CMPBDA/payments"</span>,
            <span class="string">"metadata"</span>: { },
            <span class="string">"stats"</span>: {
                <span class="string">"tilt_percent"</span>: <span class="number">0</span>,
                <span class="string">"raised_amount"</span>: <span class="number">0</span>,
                <span class="string">"unique_contributors"</span>: <span class="number">0</span>,
                <span class="string">"number_of_payments"</span>: <span class="number">0</span>
            }
        },
        .
        .
        .
    ]
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='campaigns/update-campaign'>Update Campaign</h3 id='campaigns/update-campaign'>
<p>Currently, this request supports partial PUTs. For example, you can do a request
to update a single attribute without having to send the full <a href="/Crowdtilt/crowdtilt-api-spec/blob/master/objects/README.md#campaign">campaign object</a>.

</p>
<pre><code><span class="title">PUT</span> /campaigns/:id</code></pre>
<h4>Response Body</h4>
<pre><code>{
    <span class="string">"campaign"</span>: {
        <span class="string">"id"</span>: <span class="string">"CMPBDA"</span>,
        <span class="string">"user_id"</span>: <span class="string">"USREC5"</span>,
        <span class="string">"title"</span>: <span class="string">"Campaign Title"</span>,
        <span class="string">"description"</span>: <span class="string">"some description"</span>,
        <span class="string">"privacy"</span>: <span class="number">1</span>,
        <span class="string">"type"</span>: <span class="number">1</span>,
        <span class="string">"tilt_amount"</span>: <span class="number">100</span>,
        <span class="string">"min_payment_amount"</span>: <span class="number">0</span>,
        <span class="string">"fixed_payment_amount"</span>: <span class="number">0</span>,
        <span class="string">"expiration_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
        <span class="string">"creation_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
        <span class="string">"modification_date"</span>: <span class="string">"2000-01-02T01:02:03Z"</span>,
        <span class="string">"img"</span>: <span class="string">"https://url.to/img.jpg"</span>,
        <span class="string">"is_tilted"</span>: <span class="number">0</span>,
        <span class="string">"is_paid"</span>: <span class="number">0</span>,
        <span class="string">"is_expired"</span>: <span class="number">0</span>,
        <span class="string">"tax_id"</span>: null,
        <span class="string">"tax_name"</span>: null,
        <span class="string">"uri"</span>: <span class="string">"/v1/campaigns/CMPBDA"</span>,
        <span class="string">"admin"</span>: { <span class="string">"id"</span>: <span class="string">"USREC5"</span>, <span class="string">"uri"</span>: <span class="string">"/v1/users/USREC5"</span>, <span class="keyword">...</span> },
        <span class="string">"payments_uri"</span>: <span class="string">"/v1/campaigns/CMPBDA/payments"</span>,
        <span class="string">"metadata"</span>: { },
        <span class="string">"stats"</span>: {
            <span class="string">"tilt_percent"</span>: <span class="number">0</span>,
            <span class="string">"raised_amount"</span>: <span class="number">0</span>,
            <span class="string">"unique_contributors"</span>: <span class="number">0</span>,
            <span class="string">"number_of_payments"</span>: <span class="number">0</span>
        }
    }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h2 id='campaign-payments'>Campaign Payments</h2 id='campaign-payments'>
<h3 id='campaign-payments/create-campaign-payment'>Create campaign payment</h3 id='campaign-payments/create-campaign-payment'>
<p>Before a user is able to contribute, they need to have a Credit Card associated
to them.  All amounts and prices used in this API are <em>always</em> in cents.

</p>
<p>When creating a payment, the <code>amount</code> field determines how much money is
going to the campaign.  The <code>user_fee_amount</code> accepts a value that will be
charged to the paying user, on top of the <code>amount</code>, and the <code>admin_fee_amount</code>
will be taken out of the money that goes to the campaign admin when the campaign
tilts.

</p>
<p>For example, if a user wants to pay <code>$20.00</code> to a campaign, and you want to add
a 2% fee to the user, you would send <code>amount</code> as <code>2000</code> and <code>user_fee_amount</code> as
<code>40</code> (2% of the <code>$20.00</code>).  The users credit card would then be charged
<code>$20.40</code>.  In the same scenario, if you wanted to charge 2% from the admin
when the campaign tilts, you would set <code>admin_fee_amount</code> to <code>40</code> and on tilt
the admin will only receive <code>$19.60</code> from the <code>$20.00</code> payment.

</p>
<pre><code><span class="title">POST</span> /campaigns/:id/payments

{
    "payment": {
        "amount" : 2000,
        "user_fee_amount" : 40,
        "admin_fee_amount" : 40,
        "user_id": "USR521",
        "card_id": "CCPC41"
    }
}</code></pre>
<h4>Response Body</h4>
<pre><code>{
   <span class="string">"payment"</span> : {
      <span class="string">"status"</span> : <span class="string">"charged"</span>,
      <span class="string">"modification_date"</span> : <span class="string">"2012-10-20T15:45:47Z"</span>,
      <span class="string">"metadata"</span> : {},
      <span class="string">"id"</span> : <span class="string">"CON233"</span>,
      <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP96B/payments/CON233"</span>,
      <span class="string">"amount"</span> : <span class="number">2000</span>,
      <span class="string">"user_fee_amount"</span> : <span class="number">40</span>,
      <span class="string">"admin_fee_amount"</span> : <span class="number">40</span>,
      <span class="string">"creation_date"</span> : <span class="string">"2012-10-20T15:45:13Z"</span>,
      <span class="string">"campaign"</span> : { <span class="string">"id"</span>: <span class="string">"CMP96B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP96B"</span>, <span class="keyword">...</span> },
      <span class="string">"card"</span> : { <span class="string">"id"</span> : <span class="string">"CCPC41"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR521/cards/CCPC41"</span>, <span class="keyword">...</span> },
      <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR521"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR521"</span>, <span class="keyword">...</span> },
   }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">201 =<span class="value">> Created</span></span></code></pre>
<h3 id='campaign-payments/get-campaign-payment'>Get campaign payment</h3 id='campaign-payments/get-campaign-payment'>
<pre><code>GET /campaigns/:<span class="keyword">id</span>/payments/:<span class="keyword">id</span></code></pre>
<h4>Response Body</h4>
<pre><code>{
   <span class="string">"payment"</span> : {
      <span class="string">"status"</span> : <span class="string">"charged"</span>,
      <span class="string">"modification_date"</span> : <span class="string">"2012-10-20T15:45:47Z"</span>,
      <span class="string">"metadata"</span> : {},
      <span class="string">"id"</span> : <span class="string">"CON233"</span>,
      <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP96B/payments/CON233"</span>,
      <span class="string">"amount"</span> : <span class="number">2000</span>,
      <span class="string">"user_fee_amount"</span> : <span class="number">40</span>,
      <span class="string">"admin_fee_amount"</span> : <span class="number">40</span>,
      <span class="string">"creation_date"</span> : <span class="string">"2012-10-20T15:45:13Z"</span>,
      <span class="string">"campaign"</span> : { <span class="string">"id"</span>: <span class="string">"CMP96B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP96B"</span>, <span class="keyword">...</span> },
      <span class="string">"card"</span> : { <span class="string">"id"</span> : <span class="string">"CCPC41"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR521/cards/CCPC41"</span>, <span class="keyword">...</span> },
      <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR521"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR521"</span>, <span class="keyword">...</span> },
   }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='campaign-payments/update-campaign-payment'>Update campaign payment</h3 id='campaign-payments/update-campaign-payment'>
<p>You may update the credit card for payments.
Note that you may only do this for payments with a status of &quot;rejected&quot;.

</p>
<pre><code>PUT /campaigns/:<span class="keyword">id</span>/payments/:<span class="keyword">id</span>

{
    <span class="string">"payment"</span>: {
        <span class="string">"card_id"</span>: <span class="string">"CCPC42"</span>
    }
}</code></pre>
<h4>Response Body</h4>
<pre><code>{
   <span class="string">"payment"</span> : {
      <span class="string">"status"</span> : <span class="string">"charged"</span>,
      <span class="string">"modification_date"</span> : <span class="string">"2012-10-20T15:45:47Z"</span>,
      <span class="string">"metadata"</span> : {},
      <span class="string">"id"</span> : <span class="string">"CON233"</span>,
      <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP96B/payments/CON233"</span>,
      <span class="string">"amount"</span> : <span class="number">2000</span>,
      <span class="string">"user_fee_amount"</span> : <span class="number">40</span>,
      <span class="string">"admin_fee_amount"</span> : <span class="number">40</span>,
      <span class="string">"creation_date"</span> : <span class="string">"2012-10-20T15:45:13Z"</span>,
      <span class="string">"campaign"</span> : { <span class="string">"id"</span>: <span class="string">"CMP96B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP96B"</span>, <span class="keyword">...</span> },
      <span class="string">"card"</span> : { <span class="string">"id"</span> : <span class="string">"CCPC42"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR521/cards/CCPC41"</span>, <span class="keyword">...</span> },
      <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR521"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR521"</span>, <span class="keyword">...</span> },
   }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='campaign-payments/get-campaign-payments'>Get campaign payments</h3 id='campaign-payments/get-campaign-payments'>
<pre><code><span class="title">GET</span> /campaigns/:id/payments</code></pre>
<h4>Response Body</h4>
<pre><code>{
   <span class="string">"payments"</span> : [
      {
         <span class="string">"status"</span> : <span class="string">"charged"</span>,
         <span class="string">"modification_date"</span> : <span class="string">"2012-10-20T15:45:47Z"</span>,
         <span class="string">"metadata"</span> : {},
         <span class="string">"id"</span> : <span class="string">"CON233"</span>,
         <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP96B/payments/CON233"</span>,
         <span class="string">"amount"</span> : <span class="number">2000</span>,
         <span class="string">"user_fee_amount"</span> : <span class="number">40</span>,
         <span class="string">"admin_fee_amount"</span> : <span class="number">40</span>,
         <span class="string">"creation_date"</span> : <span class="string">"2012-10-20T15:45:13Z"</span>,
         <span class="string">"campaign"</span> : { <span class="string">"id"</span>: <span class="string">"CMP96B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP96B"</span>, <span class="keyword">...</span> },
         <span class="string">"card"</span> : { <span class="string">"id"</span> : <span class="string">"CCPC41"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR521/cards/CCPC41"</span>, <span class="keyword">...</span> },
         <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR521"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR521"</span>, <span class="keyword">...</span> },
      }
   ],
   <span class="string">"pagination"</span> : {
      <span class="string">"total_pages"</span> : <span class="number">1</span>,
      <span class="string">"page"</span> : <span class="number">1</span>,
      <span class="string">"total_entries"</span> : <span class="number">1</span>,
      <span class="string">"per_page"</span> : <span class="number">50</span>
   }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='campaign-payments/get-rejected-payments'>Get rejected payments</h3 id='campaign-payments/get-rejected-payments'>
<pre><code><span class="title">GET</span> /campaigns/:id/rejected_payments</code></pre>
<h4>Response Body</h4>
<pre><code>{
   <span class="string">"payments"</span> : [
      {
         <span class="string">"status"</span> : <span class="string">"rejected"</span>,
         <span class="string">"modification_date"</span> : <span class="string">"2012-10-20T15:45:47Z"</span>,
         <span class="string">"metadata"</span> : {},
         <span class="string">"id"</span> : <span class="string">"CON233"</span>,
         <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP96B/payments/CON233"</span>,
         <span class="string">"amount"</span> : <span class="number">2000</span>,
         <span class="string">"user_fee_amount"</span> : <span class="number">40</span>,
         <span class="string">"admin_fee_amount"</span> : <span class="number">40</span>,
         <span class="string">"creation_date"</span> : <span class="string">"2012-10-20T15:45:13Z"</span>,
         <span class="string">"campaign"</span> : { <span class="string">"id"</span>: <span class="string">"CMP96B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP96B"</span>, <span class="keyword">...</span> },
         <span class="string">"card"</span> : { <span class="string">"id"</span> : <span class="string">"CCPC41"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR521/cards/CCPC41"</span>, <span class="keyword">...</span> },
         <span class="string">"user"</span>: { <span class="string">"id"</span> : <span class="string">"USR521"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USR521"</span>, <span class="keyword">...</span> },
      }
   ],
   <span class="string">"pagination"</span> : {
      <span class="string">"total_pages"</span> : <span class="number">1</span>,
      <span class="string">"page"</span> : <span class="number">1</span>,
      <span class="string">"total_entries"</span> : <span class="number">1</span>,
      <span class="string">"per_page"</span> : <span class="number">50</span>
   }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h2 id='refunds'>Refunds</h2 id='refunds'>
<h3 id='refunds/refund-a-payment'>Refund a payment</h3 id='refunds/refund-a-payment'>
<p>In order to refund a payment, simply POST with an empty body to the payment&#39;s
refund subresource.

</p>
<pre><code><span class="constant">POST</span> /<span class="identifier">campaigns</span>/<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>/<span class="identifier">payments</span>/<span class="symbol">:<span class="identifier"><span class="keymethods">id</span></span></span>/<span class="identifier">refund</span>

<span class="variable">$ </span><span class="identifier">curl</span> -<span class="constant">X</span> <span class="constant">POST</span> -<span class="identifier">u</span> <span class="identifier">key</span><span class="symbol">:<span class="identifier">secret</span></span> \
<span class="identifier">https</span><span class="symbol">:</span>/<span class="regexp">/api-sandbox.crowdtilt.com/v</span>1/<span class="identifier">campaigns</span>/<span class="constant">CMP96B</span>/<span class="identifier">payments</span>/<span class="constant">CON233</span>/<span class="identifier">refund</span></code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h2 id='campaign-settlements'>Campaign Settlements</h2 id='campaign-settlements'>
<p>Campaign Settlements represent a disbursement of funds for a tilted campaign.
A campaign settlement will show you the <code>campaign</code>, <code>bank</code>, and <code>user</code> that the
<code>settlement</code> belongs to.  It will also show you the <code>admin_amount</code>, which is the
amount of money being sent to the admin&#39;s bank account.  The <code>escrow_amount</code>
is how much money from the campaign is going into your escrow account (it
represents fees charged to the admin and payers).  Possible statuses for a
campaign settlement are:

</p>
<ul>
<li><code>needs bank account</code> - this means that admin of the campaign needs to set up
his or her bank account before the funds will be sent.</li>
<li><code>pending</code> - this means that the funds are being transfered to the bank account
specified in the settlement.</li>
<li><code>rejected</code> - this means that the settlement was rejected and could not be
sent to the bank account in question.  In these cases, the bank account
can be updated, as specified in the
<a href="#update-campaign-settlement-bank">update campaign settlement</a> section.</li>
<li><code>re-sent pending</code> - this means that the settlement previously failed, but the
bank account has been updated, and the funds are being transfered to the new
bank account.</li>
<li><code>cleared</code> - this means that the funds have cleared the bank account and the
settlement has completed successfully.</li>
</ul>
<h3 id='campaign-settlements/list-campaign-settlements'>List Campaign Settlements</h3 id='campaign-settlements/list-campaign-settlements'>
<pre><code><span class="title">GET</span> /campaigns/:id/settlements</code></pre>
<h4>Response</h4>
<pre><code><span class="string">"settlements"</span> : [
    {
        <span class="string">"id"</span> : <span class="string">"SMTD88"</span>,
            <span class="string">"status"</span> : <span class="string">"pending"</span>,
            <span class="string">"admin_amount"</span> : <span class="number">1960</span>,
            <span class="string">"escrow_amount"</span> : <span class="number">40</span>,
            <span class="string">"modification_date"</span> : <span class="string">"2012-10-29T15:34:48.177091000Z"</span>,
            <span class="string">"creation_date"</span> : <span class="string">"2012-10-29T15:34:48.177091000Z"</span>,
            <span class="string">"bank"</span> : { <span class="string">"id"</span> : <span class="string">"BAPCA3"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USRC77/banks/BAPCA3"</span>, <span class="keyword">...</span> },
            <span class="string">"campaign"</span> : { <span class="string">"id"</span> : <span class="string">"CMPCCC"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMPCCC"</span>, <span class="keyword">...</span> },
            <span class="string">"user"</span> : { <span class="string">"id"</span> : <span class="string">"USRC7B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USRC7B"</span>, <span class="keyword">...</span> }
    },
    .
    .
    .
],
<span class="string">"pagination"</span> : {
    <span class="string">"total_pages"</span> : <span class="number">1</span>,
    <span class="string">"page"</span> : <span class="number">1</span>,
    <span class="string">"total_entries"</span> : <span class="number">1</span>,
    <span class="string">"per_page"</span> : <span class="number">50</span>
}</code></pre>
<h3 id='campaign-settlements/get-campaign-settlement'>Get Campaign Settlement</h3 id='campaign-settlements/get-campaign-settlement'>
<pre><code>GET /campaigns/:<span class="keyword">id</span>/settlements/:<span class="keyword">id</span></code></pre>
<h4>Response</h4>
<pre><code>{
    <span class="string">"settlement"</span> : {
        <span class="string">"id"</span> : <span class="string">"SMTD88"</span>,
            <span class="string">"status"</span> : <span class="string">"pending"</span>,
            <span class="string">"admin_amount"</span> : <span class="number">1960</span>,
            <span class="string">"escrow_amount"</span> : <span class="number">40</span>,
            <span class="string">"modification_date"</span> : <span class="string">"2012-10-29T15:34:48.177091000Z"</span>,
            <span class="string">"creation_date"</span> : <span class="string">"2012-10-29T15:34:48.177091000Z"</span>,
            <span class="string">"bank"</span> : { <span class="string">"id"</span> : <span class="string">"BAPCA3"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USRC77/banks/BAPCA3"</span>, <span class="keyword">...</span> },
            <span class="string">"campaign"</span> : { <span class="string">"id"</span> : <span class="string">"CMPCCC"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMPCCC"</span>, <span class="keyword">...</span> },
            <span class="string">"user"</span> : { <span class="string">"id"</span> : <span class="string">"USRC7B"</span>, <span class="string">"uri"</span> : <span class="string">"/v1/users/USRC7B"</span>, <span class="keyword">...</span> }
    }
}</code></pre>
<h3 id='campaign-settlements/update-campaign-settlement-bank'>Update Campaign Settlement Bank</h3 id='campaign-settlements/update-campaign-settlement-bank'>
<p>A Campaign Settlement can only be updated if the status is <code>needs bank account</code>.
In this instance, a <code>bank</code> object can be sent with the <code>id</code> of a new bank
account to re-attempt the settlement with.

</p>
<pre><code>POST /campaigns/:<span class="keyword">id</span>/settlements/:<span class="keyword">id</span>/bank</code></pre>
<h4>Request</h4>
<pre><code>{
    "<span class="attribute">bank</span>" : <span class="value">{ "<span class="attribute">id</span>" : <span class="value"><span class="string">"BAPCA4"</span> </span>}
</span>}</code></pre>
<h2 id='campaign-comments'>Campaign Comments</h2 id='campaign-comments'>
<h3 id='campaign-comments/create-campaign-comment'>Create Campaign Comment</h3 id='campaign-comments/create-campaign-comment'>
<p>To create a comment, POST to <code>/campaigns/:id/comments</code>.
The only required fields are the <code>user_id</code> of the comment author
and the <code>body</code> of the comment.
The <code>title</code>, <code>parent_id</code>, and <code>score</code> fields are optional.
The <code>parent_id</code> is the id of the parent of this comment, i.e.,
the comment that this comment is a reply to.
This only matters if you want to support nested comments.
You may provide a <code>parent_id</code> of null for top-level comments.
The purpose of the <code>score</code> field is to provide support for voting on comments.

</p>
<pre><code><span class="title">POST</span> /campaigns/:id/comments

{
    "comment" : {
        "user_id' : "USR123",
        "title" : "<span class="title">Optional</span> Title<span class="string">",
        "</span>body<span class="string">" : "</span>Comment Body<span class="string">",
        "</span>score<span class="string">" : 1,
        "</span>parent_id<span class="string">" : null
    }
}</code></pre>
<h4>Response</h4>
<pre><code>{
    "comment" : {
        "id" : "CMT123",
        "user_id' : "USR123",
        "title" : "<span class="title">Optional</span> Title<span class="string">",
        "</span>body<span class="string">" : "</span>Comment Body<span class="string">",
        "</span>score<span class="string">" : 1,
        "</span>parent_id<span class="string">" : null,
        "</span>metadata<span class="string">" : { },
        "</span>creation_date<span class="string">" : "</span><span class="number">2012</span>-<span class="number">10</span>-01T00:<span class="number">00</span>:00Z<span class="string">",
        "</span>modification_date<span class="string">" : "</span><span class="number">2012</span>-<span class="number">10</span>-01T00:<span class="number">00</span>:00Z<span class="string">"
    }
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='campaign-comments/get-campaign-comments'>Get Campaign Comments</h3 id='campaign-comments/get-campaign-comments'>
<h4>Response</h4>
<pre><code>{
    <span class="string">"comments"</span> :<span class="sqbracket"> [
        {
            "id" : "CMT123",
            "user_id' : "USR123",
            "title" : "Optional Title",
            "body" : "Comment Body",
            "score" : 1,
            "parent_id" : null,
            "metadata" : { },
            "creation_date" : "2012-10-01T00:00:00Z",
            "modification_date" : "2012-10-01T00:00:00Z"
        },
        ...
    ]</span>
}</code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='campaign-comments/get-campaign-comment'>Get campaign comment</h3 id='campaign-comments/get-campaign-comment'>
<pre><code>GET /campaigns/:<span class="keyword">id</span>/comments/:<span class="keyword">id</span></code></pre>
<h4>Response</h4>
<pre><code>{
    "comment" : {
        "id" : "CMT123",
        "user_id' : "USR123",
        "title" : "<span class="title">Optional</span> Title<span class="string">",
        "</span>body<span class="string">" : "</span>Comment Body<span class="string">",
        "</span>score<span class="string">" : 1,
        "</span>parent_id<span class="string">" : null,
        "</span>metadata<span class="string">" : { },
        "</span>creation_date<span class="string">" : "</span><span class="number">2012</span>-<span class="number">10</span>-01T00:<span class="number">00</span>:00Z<span class="string">",
        "</span>modification_date<span class="string">" : "</span><span class="number">2012</span>-<span class="number">10</span>-01T00:<span class="number">00</span>:00Z<span class="string">"
    }
}</code></pre>
<h4>Response Code</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='campaign-comments/update-campaign-comment'>Update campaign comment</h3 id='campaign-comments/update-campaign-comment'>
<p>Currently you can only alter the score and the metadata of a comment.

</p>
<pre><code>PUT /campaigns/:<span class="keyword">id</span>/comments/:<span class="keyword">id</span></code></pre>
<h4>Request</h4>
<pre><code>{
    "<span class="attribute">comment</span>" : <span class="value">{
        "<span class="attribute">score</span>" : <span class="value"><span class="number">2</span></span>,
        "<span class="attribute">metadata</span>" : <span class="value">{
            "<span class="attribute">key</span>" : <span class="value"><span class="string">"value"</span></span>,
        }
    </span>}
</span>}</code></pre>
<h4>Response</h4>
<pre><code>{
    "comment" : {
        "id" : "CMT123",
        "user_id' : "USR123",
        "title" : "<span class="title">Optional</span> Title<span class="string">",
        "</span>body<span class="string">" : "</span>Comment Body<span class="string">",
        "</span>score<span class="string">" : 2,
        "</span>parent_id<span class="string">" : null,
        "</span>metadata<span class="string">" : {
        "</span>key<span class="string">" : "</span>value<span class="string">",
        },
        "</span>creation_date<span class="string">" : "</span><span class="number">2012</span>-<span class="number">10</span>-01T00:<span class="number">00</span>:00Z<span class="string">",
        "</span>modification_date<span class="string">" : "</span><span class="number">2012</span>-<span class="number">10</span>-01T00:<span class="number">00</span>:00Z<span class="string">"
    }
}</code></pre>
<h4>Response Code</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h3 id='campaign-comments/delete-a-comment'>Delete a comment</h3 id='campaign-comments/delete-a-comment'>
<pre><code>DELETE /campaigns/:<span class="keyword">id</span>/comments/:<span class="keyword">id</span></code></pre>
<h4>Response Codes</h4>
<pre><code><span class="setting">200 =<span class="value">> OK</span></span></code></pre>
<h2 id='api-examples'>API Examples</h2 id='api-examples'>
<h3 id='api-examples/create-a-user'>Create a User</h3 id='api-examples/create-a-user'>
<p>Generally the first thing you want to do is create some users.  Let&#39;s
create two users, an admin, and a contributor.

</p>
<pre><code><span class="comment"># Create the admin user</span>
$ curl -X POST -u key:secret  -H Content-Type:application/json \
    https:<span class="comment">//api-sandbox.crowdtilt.com/v1/users \</span>
    -d<span class="string">'{
        "user":{
            "email" : "user@gmail.com"
        }
    }'</span>

<span class="comment"># Response</span>
{
    <span class="string">"user"</span> : {
       <span class="string">"last_login_date"</span> : <span class="keyword">null</span>,
       <span class="string">"paid_campaigns_uri"</span> : <span class="string">"/v1/users/USRC55/paid_campaigns"</span>,
       <span class="string">"is_verified"</span> : <span class="number">0</span>,
       <span class="string">"uri"</span> : <span class="string">"/v1/users/USRC55"</span>,
       <span class="string">"firstname"</span> : <span class="keyword">null</span>,
       <span class="string">"lastname"</span> : <span class="keyword">null</span>,
       <span class="string">"email"</span> : <span class="string">"user@gmail.com"</span>,
       <span class="string">"creation_date"</span> : <span class="string">"2012-10-31T00:41:55Z"</span>,
       <span class="string">"metadata"</span> : {},
       <span class="string">"id"</span> : <span class="string">"USRC55"</span>,
       <span class="string">"campaigns_uri"</span> : <span class="string">"/v1/users/USRC55/campaigns"</span>,
       <span class="string">"payments_uri"</span> : <span class="string">"/v1/users/USRC55/payments"</span>
    }
 }

 <span class="comment"># Create the paying user</span>
 $ curl -X POST -u key:secret  -H Content-Type:application/json \
     https:<span class="comment">//api-sandbox.crowdtilt.com/v1/users \</span>
     -d<span class="string">'{
         "user":{
             "email" : "payer@gmail.com"
         }
     }'</span>

 <span class="comment"># Response</span>
 {
     <span class="string">"user"</span> : {
        <span class="string">"last_login_date"</span> : <span class="keyword">null</span>,
        <span class="string">"paid_campaigns_uri"</span> : <span class="string">"/v1/users/USRE32/paid_campaigns"</span>,
        <span class="string">"is_verified"</span> : <span class="number">0</span>,
        <span class="string">"uri"</span> : <span class="string">"/v1/users/USRE32"</span>,
        <span class="string">"firstname"</span> : <span class="keyword">null</span>,
        <span class="string">"lastname"</span> : <span class="keyword">null</span>,
        <span class="string">"email"</span> : <span class="string">"payer@gmail.com"</span>,
        <span class="string">"creation_date"</span> : <span class="string">"2012-10-31T00:41:55Z"</span>,
        <span class="string">"metadata"</span> : {},
        <span class="string">"id"</span> : <span class="string">"USRC55"</span>,
        <span class="string">"campaigns_uri"</span> : <span class="string">"/v1/users/USRE32/campaigns"</span>,
        <span class="string">"payments_uri"</span> : <span class="string">"/v1/users/USRE32/payments"</span>
     }
  }</code></pre>
<h3 id='api-examples/create-a-campaign'>Create a campaign</h3 id='api-examples/create-a-campaign'>
<p>Once you&#39;ve got some users, you can create a campaign for any of them.  For this
example, we&#39;ll make the first user created above the <code>admin</code> user, and use the
second user to make a payment on the campaign.

</p>
<pre><code>$ curl -X POST -u key:secret  -H Content-Type:application/json \
    https:<span class="comment">//api-sandbox.crowdtilt.com/v1/campaigns \</span>
    -d<span class="string">'{
        "campaign" : {
            "user_id" : "USRC55",
            "expiration_date" : "2012-10-31T12:00:00Z",
            "title" : "Halloween Awesome Fest",
            "description" : "This will be the best thing ever!",
            "tilt_amount" : 300000
        }
    }'</span>

<span class="comment"># Response</span>
{
    <span class="string">"campaign"</span> : {
        <span class="string">"img"</span> : <span class="keyword">null</span>,
            <span class="string">"tilter"</span> : <span class="keyword">null</span>,
            <span class="string">"min_payment_amount"</span> : <span class="number">0</span>,
            <span class="string">"first_contributor"</span> : <span class="keyword">null</span>,
            <span class="string">"metadata"</span> : {},
            <span class="string">"id"</span> : <span class="string">"CMP542"</span>,
            <span class="string">"is_paid"</span> : <span class="number">0</span>,
            <span class="string">"settlements_uri"</span> : <span class="string">"/v1/campaigns/CMP542/settlements"</span>,
            <span class="string">"privacy"</span> : <span class="number">1</span>,
            <span class="string">"admin"</span> : {
                <span class="string">"firstname"</span> : <span class="keyword">null</span>,
                <span class="string">"paid_campaigns_uri"</span> : <span class="string">"/v1/users/USRC55/paid_campaigns"</span>,
                <span class="string">"img"</span> : <span class="keyword">null</span>,
                <span class="string">"email"</span> : <span class="string">"user@gmail.com"</span>,
                <span class="string">"metadata"</span> : {},
                <span class="string">"id"</span> : <span class="string">"USRC55"</span>,
                <span class="string">"uri"</span> : <span class="string">"/v1/users/USRC55"</span>,
                <span class="string">"creation_date"</span> : <span class="string">"2012-10-31T00:41:55Z"</span>,
                <span class="string">"campaigns_uri"</span> : <span class="string">"/v1/users/USRC55/campaigns"</span>,
                <span class="string">"last_login_date"</span> : <span class="string">"2012-10-30T17:41:55.834029000Z"</span>,
                <span class="string">"lastname"</span> : <span class="keyword">null</span>,
                <span class="string">"payments_uri"</span> : <span class="string">"/v1/users/USRC55/payments"</span>,
                <span class="string">"is_verified"</span> : <span class="number">0</span>
            },
            <span class="string">"is_expired"</span> : <span class="number">0</span>,
            <span class="string">"fixed_payment_amount"</span> : <span class="number">0</span>,
            <span class="string">"tilt_amount"</span> : <span class="number">300000</span>,
            <span class="string">"description"</span> : <span class="string">"This will be the best thing ever!"</span>,
            <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP542"</span>,
            <span class="string">"creation_date"</span> : <span class="string">"2012-11-01T13:40:10.153237000Z"</span>,
            <span class="string">"user_id"</span> : <span class="string">"USRC55"</span>,
            <span class="string">"title"</span> : <span class="string">"Halloween Awesome Fest"</span>,
            <span class="string">"payments_uri"</span> : <span class="string">"/v1/campaigns/CMP542/payments"</span>,
            <span class="string">"modification_date"</span> : <span class="string">"2012-11-01T13:40:10.153237000Z"</span>,
            <span class="string">"stats"</span> : {
                <span class="string">"tilt_percent"</span> : <span class="number">0</span>,
                <span class="string">"raised_amount"</span> : <span class="number">0</span>,
                <span class="string">"unique_contributors"</span> : <span class="number">0</span>,
                <span class="string">"number_of_contributions"</span> : <span class="number">0</span>
            },
            <span class="string">"expiration_date"</span> : <span class="string">"2012-10-31T12:00:00Z"</span>,
            <span class="string">"is_tilted"</span> : <span class="number">0</span>,
            <span class="string">"tax_id"</span> : <span class="keyword">null</span>,
            <span class="string">"tax_name"</span> : <span class="keyword">null</span>
    }
}</code></pre>
<h3 id='api-examples/create-a-card'>Create a card</h3 id='api-examples/create-a-card'>
<p>Now, we&#39;ll create a credit card for the paying user.

</p>
<pre><code><span class="variable">$ </span><span class="identifier">curl</span> -<span class="constant">X</span> <span class="constant">POST</span> -<span class="identifier">u</span> <span class="identifier">key</span><span class="symbol">:<span class="identifier">secret</span></span>  -<span class="constant">H</span> <span class="constant">Content</span>-<span class="constant">Type</span><span class="symbol">:<span class="identifier">application</span></span>/<span class="identifier">json</span> \
    <span class="identifier">https</span><span class="symbol">:</span>/<span class="regexp">/api-sandbox.crowdtilt.com/v</span>1/<span class="identifier">users</span>/<span class="constant">USRE32</span>/<span class="identifier">cards</span> \
    -<span class="identifier">d</span><span class="string">'{
        "card" : {
            "number" : "4111111111111111",
            "expiration_month" : "07",
            "expiration_year" : "2032",
            "security_code" : "123"
        }
    }'</span>

<span class="comment"># Response</span>
{
    <span class="string">"card"</span> <span class="symbol">:</span> {
       <span class="string">"last_four"</span> <span class="symbol">:</span> <span class="string">"1111"</span>,
       <span class="string">"expiration_year"</span> <span class="symbol">:</span> <span class="string">"2032"</span>,
       <span class="string">"expiration_month"</span> <span class="symbol">:</span> <span class="string">"07"</span>,
       <span class="string">"uri"</span> <span class="symbol">:</span> <span class="string">"/v1/users/USRE32/cards/CCPA69"</span>,
       <span class="string">"card_type"</span> <span class="symbol">:</span> <span class="string">"VISA card"</span>,
       <span class="string">"creation_date"</span> <span class="symbol">:</span> <span class="string">"2012-11-01T20:49:37Z"</span>,
       <span class="string">"metadata"</span> <span class="symbol">:</span> {},
       <span class="string">"id"</span> <span class="symbol">:</span> <span class="string">"CCPA69"</span>
    }
 }</code></pre>
<h3 id='api-examples/create-a-payment'>Create a payment</h3 id='api-examples/create-a-payment'>
<p>Now we&#39;ll create a payment by the paying user to the campaign we created.

</p>
<pre><code>$ curl -X POST -u key:secret  -H Content-Type:application/json \
    https:<span class="comment">//api-sandbox.crowdtilt.com/v1/campaings/CMP542/payments \</span>
    -d<span class="string">'{
        "payment" : {
            "user_id" : "USRE32",
            "amount" : "2000",
            "user_fee_amount" : "100",
            "admin_fee_amount" : "200",
            "card_id" : "CCPA69"
        }
    }'</span>

<span class="comment"># Response</span>
{
    <span class="string">"payment"</span> : {
       <span class="string">"status"</span> : <span class="string">"authorized"</span>,
       <span class="string">"user_fee_amount"</span> : <span class="string">"100"</span>,
       <span class="string">"campaign"</span> : {
          <span class="string">"img"</span> : <span class="keyword">null</span>,
          <span class="string">"tilter"</span> : <span class="keyword">null</span>,
          <span class="string">"min_payment_amount"</span> : <span class="number">0</span>,
          <span class="string">"first_contributor"</span> : {
             <span class="string">"firstname"</span> : <span class="string">""</span>,
             <span class="string">"paid_campaigns_uri"</span> : <span class="string">"/v1/users/USRE32/paid_campaigns"</span>,
             <span class="string">"img"</span> : <span class="keyword">null</span>,
             <span class="string">"email"</span> : <span class="string">"payer@gmail.com"</span>,
             <span class="string">"metadata"</span> : {},
             <span class="string">"id"</span> : <span class="string">"USRE32"</span>,
             <span class="string">"uri"</span> : <span class="string">"/v1/users/USRE32"</span>,
             <span class="string">"creation_date"</span> : <span class="string">"2012-11-01T20:56:19Z"</span>,
             <span class="string">"campaigns_uri"</span> : <span class="string">"/v1/users/USRE32/campaigns"</span>,
             <span class="string">"last_login_date"</span> : <span class="string">"2012-11-01T13:56:19.964087000Z"</span>,
             <span class="string">"lastname"</span> : <span class="string">""</span>,
             <span class="string">"payments_uri"</span> : <span class="string">"/v1/users/USRE32/payments"</span>,
         <span class="string">"is_verified"</span> : <span class="number">0</span>
          },
          <span class="string">"metadata"</span> : {},
          <span class="string">"id"</span> : <span class="string">"CMP542"</span>,
          <span class="string">"is_paid"</span> : <span class="number">0</span>,
          <span class="string">"settlements_uri"</span> : <span class="string">"/v1/campaigns/CMP542"</span>,
          <span class="string">"privacy"</span> : <span class="number">1</span>,
          <span class="string">"admin"</span> : {
         <span class="string">"firstname"</span> : <span class="string">""</span>,
             <span class="string">"paid_campaigns_uri"</span> : <span class="string">"/v1/users/USRC55/paid_campaigns"</span>,
             <span class="string">"img"</span> : <span class="keyword">null</span>,
             <span class="string">"email"</span> : <span class="string">"user@gmail.com"</span>,
             <span class="string">"metadata"</span> : {},
             <span class="string">"id"</span> : <span class="string">"USRC55"</span>,
             <span class="string">"uri"</span> : <span class="string">"/v1/users/USRC55"</span>,
             <span class="string">"creation_date"</span> : <span class="string">"2012-10-31T00:41:55Z"</span>,
             <span class="string">"campaigns_uri"</span> : <span class="string">"/v1/users/USRC55/campaigns"</span>,
             <span class="string">"last_login_date"</span> : <span class="string">"2012-10-30T17:41:55.834029000Z"</span>,
             <span class="string">"lastname"</span> : <span class="string">""</span>,
             <span class="string">"payments_uri"</span> : <span class="string">"/v1/users/USRC55/payments"</span>,
             <span class="string">"is_verified"</span> : <span class="number">0</span>
          },
          <span class="string">"is_expired"</span> : <span class="number">1</span>,
          <span class="string">"fixed_payment_amount"</span> : <span class="number">0</span>,
          <span class="string">"tilt_amount"</span> : <span class="number">300000</span>,
          <span class="string">"description"</span> : <span class="string">"This will be the best thing ever!"</span>,
          <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP542"</span>,
          <span class="string">"creation_date"</span> : <span class="string">"2012-11-01T13:40:10.153237000Z"</span>,
          <span class="string">"title"</span> : <span class="string">"Halloween Awesome Fest"</span>,
          <span class="string">"payments_uri"</span> : <span class="string">"/v1/campaigns/CMP5422B558246411E281ED84A52A776874/payments"</span>,
          <span class="string">"modification_date"</span> : <span class="string">"2012-11-01T13:40:10.153237000Z"</span>,
          <span class="string">"stats"</span> : {
             <span class="string">"tilt_percent"</span> : <span class="number">2</span>,
             <span class="string">"raised_amount"</span> : <span class="number">6000</span>,
             <span class="string">"unique_contributors"</span> : <span class="number">1</span>,
             <span class="string">"number_of_contributions"</span> : <span class="number">3</span>
          },
          <span class="string">"expiration_date"</span> : <span class="string">"2012-10-31T12:00:00Z"</span>,
          <span class="string">"is_tilted"</span> : <span class="number">0</span>,
          <span class="string">"tax_id"</span> : <span class="keyword">null</span>,
          <span class="string">"tax_name"</span> : <span class="keyword">null</span>
       },
       <span class="string">"user"</span> : {
          <span class="string">"firstname"</span> : <span class="string">""</span>,
          <span class="string">"paid_campaigns_uri"</span> : <span class="string">"/v1/users/USR962FB8E0246611E2AEDE84A52A776874/paid_campaigns"</span>,
          <span class="string">"img"</span> : <span class="keyword">null</span>,
          <span class="string">"email"</span> : <span class="string">"payer@gmail.com"</span>,
          <span class="string">"metadata"</span> : {},
          <span class="string">"id"</span> : <span class="string">"USRE32"</span>,
          <span class="string">"uri"</span> : <span class="string">"/v1/users/USRE32"</span>,
          <span class="string">"creation_date"</span> : <span class="string">"2012-11-01T20:56:19Z"</span>,
          <span class="string">"campaigns_uri"</span> : <span class="string">"/v1/users/USRE32/campaigns"</span>,
          <span class="string">"last_login_date"</span> : <span class="string">"2012-11-01T13:56:19.964087000Z"</span>,
          <span class="string">"lastname"</span> : <span class="string">""</span>,
          <span class="string">"payments_uri"</span> : <span class="string">"/v1/users/USRE32/payments"</span>,
          <span class="string">"is_verified"</span> : <span class="number">0</span>
       },
       <span class="string">"metadata"</span> : {},
       <span class="string">"id"</span> : <span class="string">"CON036"</span>,
       <span class="string">"uri"</span> : <span class="string">"/v1/campaigns/CMP542/payments/CON036"</span>,
       <span class="string">"card"</span> : {
          <span class="string">"last_four"</span> : <span class="string">"1111"</span>,
          <span class="string">"metadata"</span> : {},
          <span class="string">"id"</span> : <span class="string">"CCPA69"</span>,
          <span class="string">"expiration_year"</span> : <span class="number">2032</span>,
          <span class="string">"expiration_month"</span> : <span class="string">"07"</span>,
          <span class="string">"uri"</span> : <span class="string">"/v1/users/USRE32/cards/CCPA69"</span>,
          <span class="string">"card_type"</span> : <span class="string">"VISA card"</span>,
          <span class="string">"creation_date"</span> : <span class="string">"2012-11-01T20:57:20Z"</span>
       },
       <span class="string">"amount"</span> : <span class="string">"2000"</span>,
       <span class="string">"admin_fee_amount"</span> : <span class="string">"200"</span>,
    }
 }</code></pre>
<p>This payment will charge <code>$21.00</code> to the user&#39;s credit card (<code>$20.00</code> from the
<code>amount</code> field, plus <code>$1.00</code> from the <code>user_fee_amount</code> field), and the admin of
the campaign will receive <code>$18.00</code> from the payment (<code>$20.00</code> from <code>amount</code>
minus the <code>$2.00</code> set in the <code>admin_fee_amount</code> field).

</p>
<p>Now you have created 2 users, a campaign under one user, and a payment to the
campaign by another user!

</p>
<h2 id='tokenizing-sensitive-user-information'>Tokenizing Sensitive User Information</h2 id='tokenizing-sensitive-user-information'>
<p>If you want to store sensitive financial information from your users (like
credit card and bank account numbers), you are required to be compliant
with the <a href="https://www.pcisecuritystandards.org/" target="_blank">Payment 
Card Industry Data Security Standard (PCI DSS)</a>.
Crowdtilt handles this for you by providing a PCI-compliant javascript library, <code>crowdtilt.js</code>,
which is easy to implement on your website. Sensitive payment information can
then be securely collected without ever touching your servers, keeping you
completely outside of PCI and regulatory scope.

</p>
<p>To implement <code>crowdtilt.js</code>, follow the steps below. You can also check out this 
<a href="#tokenization-examples">example implementation</a>.

</p>
<h3 id='tokenizing-sensitive-user-information/include-the-library'>Include the Library</h3 id='tokenizing-sensitive-user-information/include-the-library'>
<p>To use <code>crowdtilt.js</code>, simply include the following script tag on any page
where you will be collecting credit card or bank account information:

</p>
<pre><code><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"https://api.crowdtilt.com/v1/js/crowdtilt.js"</span>></span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>></span></code></pre>
<h3 id='tokenizing-sensitive-user-information/initialize-the-crowdtilt-object'>Initialize the crowdtilt object</h3 id='tokenizing-sensitive-user-information/initialize-the-crowdtilt-object'>
<p>In a separate script tag, initialize the crowdtilt object:

</p>
<pre><code><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>></span><span class="javascript">
    crowdtilt.init();
</span><span class="tag">&lt;/<span class="title">script</span>></span></code></pre>
<h3 id='tokenizing-sensitive-user-information/make-sure-to-create-users-first'>Make sure to create users first</h3 id='tokenizing-sensitive-user-information/make-sure-to-create-users-first'>
<p>Credit cards and bank accounts must be associated with existing <code>user</code> objects created through
our API. This means that you need to collect user account information in a step <em>before</em> collecting credit 
card or bank account information. See <a href="#create-user">creating users</a> for more information. You&#39;ll need the 
resulting <code>user id</code> to create credit cards and bank accounts for that user.

</p>
<h3 id='tokenizing-sensitive-user-information/create-a-credit-card'>Create a Credit Card</h3 id='tokenizing-sensitive-user-information/create-a-credit-card'>
<p>Once you have a <code>user</code>, the next step is to collect her credit card information and pass it to the
<code>crowdtilt.card.create</code> function along with her <code>user id</code>, as well as a function to handle the response
(more on that in a second).

</p>
<p>Example:

</p>
<pre><code><span class="string">"cardData"</span>: {
    <span class="string">"number"</span>:<span class="string">"4111111111111111"</span>,
    <span class="string">"expiration_month"</span>:<span class="string">"03"</span>,
    <span class="string">"expiration_year"</span>:<span class="number">2023</span>,
    <span class="string">"security_code"</span>:<span class="number">123</span> 
}

crowdtilt<span class="preprocessor">.card</span><span class="preprocessor">.create</span>(user_id, cardData, responseHandler)<span class="comment">;   </span></code></pre>
<p>The <code>user id</code> should be the hash returned by the user creation API call, e.g. &quot;USR1E0A9BCE5F6111E28F485D097AC0CAB6&quot;

</p>
<p>The required credit card data fields are:

</p>
<ul>
<li><code>number</code>: card number, as a string, without any separators, should be 16 digits in length, e.g. &quot;4111111111111111&quot;</li>
<li><code>expiration_month</code>: two digit number, as a string, representing the card&#39;s expiration month, e.g. &quot;03&quot;</li>
<li><code>expiration_year</code>: four digit number, as a string, representing the card&#39;s expiration year, e.g. &quot;2013&quot;</li>
<li><code>security_code</code>: three or four digit number, as a string, e.g. &quot;123&quot;</li>
</ul>
<p>If successful, the response object passed to the responseHandler function takes the form:

</p>
<pre><code>{
    "<span class="attribute">card</span>": <span class="value">{
        "<span class="attribute">last_four</span>":<span class="value"><span class="string">"1111"</span></span>,
        "<span class="attribute">expiration_year</span>":<span class="value"><span class="number">2013</span></span>,
        "<span class="attribute">expiration_month</span>":<span class="value"><span class="string">"03"</span></span>,
        "<span class="attribute">uri</span>":<span class="value"><span class="string">"/v1/users/USR1E0A9BCE5F6111E28F485D097AC0CAB6/cards/CCP59BCB06C601F11E28057FB337AC0CAB6"</span></span>,
        "<span class="attribute">card_type</span>":<span class="value"><span class="string">"VISA card"</span></span>,
        "<span class="attribute">creation_date</span>":<span class="value"><span class="string">"2013-01-16T20:57:34Z"</span></span>,
        "<span class="attribute">metadata</span>":<span class="value">{}</span>,
        "<span class="attribute">id</span>":<span class="value"><span class="string">"CCP59BCB06C601F11E28057FB337AC0CAB6"</span>
    </span>}</span>,
    "<span class="attribute">request_id</span>":<span class="value"><span class="string">"REQ5735A0D8601F11E2998D00347AC0CAB6"</span></span>,
    "<span class="attribute">status</span>":<span class="value"><span class="number">201</span>
</span>}</code></pre>
<p>If not successful, the response object passed to the responseHandler function takes the form:

</p>
<pre><code>{
    <span class="string">"error"</span>: <span class="keyword">...</span> // A string or an object describing the error(s)
    <span class="string">"request_id"</span>: <span class="keyword">...</span> //May or may not be present depending on whether the error was found before or after submitting to the API
    <span class="string">"status"</span>: <span class="keyword">...</span> // HTTP status code
}</code></pre>
<h3 id='tokenizing-sensitive-user-information/handling-the-response'>Handling the Response</h3 id='tokenizing-sensitive-user-information/handling-the-response'>
<p>When creating a card or a bank account, you must pass in your own callback function to handle the response
from our API.  The <code>status</code> property included with the response provides a handy hook to help you decide
what to do.

</p>
<p>Here is a basic outline of what your response handler could look like:

</p>
<pre><code><span class="reserved">function</span> responseHandler(response) {
    <span class="keyword">switch</span> (response.status) {
       <span class="reserved">case</span> <span class="number">201</span>:
           // The card <span class="keyword">or</span> bank was created successfully!
           // Submit the data contained <span class="keyword">in</span> response.card <span class="keyword">or</span> response.bank to your server <span class="keyword">for</span> saving
           // For bank accounts, remember to set the <span class="keyword">new</span> account as the <span class="reserved">default</span> <span class="keyword">in</span> addition to saving it to your database
           <span class="keyword">break</span>;
       <span class="reserved">case</span> <span class="number">400</span>:
           // missing field - check response.error <span class="keyword">for</span> details
           <span class="keyword">break</span>;
       <span class="reserved">case</span> <span class="number">404</span>:
           // your user_id <span class="keyword">is</span> incorrect (<span class="literal">no</span> user was found)
           <span class="keyword">break</span>;
       <span class="reserved">default</span>:
           // Some other error ocurred, check response.error <span class="keyword">for</span> details
   }
}</code></pre>
<h3 id='tokenizing-sensitive-user-information/create-a-bank-account'>Create a Bank Account</h3 id='tokenizing-sensitive-user-information/create-a-bank-account'>
<p>Creating bank accounts is just like creating credit cards. First gather up the bank account information, then pass it to
<code>crowdtilt.bank.create</code> along with a <code>user id</code> and a response handler...but keep in mind one <strong>important</strong> extra step: 
When you go to save the tokenized bank account to your server (most likely through a request made in your callback function), 
you need to make an additional API call to set this new bank account as the &#39;default&#39; bank account. See 
<a href="#make-user-bank-default">setting the default bank account</a> for more information.

</p>
<p>Example:

</p>
<pre><code><span class="string">"bankData"</span>: {
    <span class="string">"name"</span> : <span class="string">"Bank Name"</span>,
    <span class="string">"account_number"</span> : <span class="string">"1234567890"</span>,
    <span class="string">"bank_code"</span> : <span class="string">"321174851"</span>
}

crowdtilt<span class="preprocessor">.bank</span><span class="preprocessor">.create</span>(user_id, bankData, responseHandler)<span class="comment">;</span></code></pre>
<p>The <code>user id</code> should be the hash returned by the user creation API call, e.g. &quot;USR1E0A9BCE5F6111E28F485D097AC0CAB6&quot;

</p>
<p>The required credit card data fields are:

</p>
<ul>
<li><code>name</code>: card number, as a string, without any separators, should be 16 digits in length, e.g. &quot;4111111111111111&quot;</li>
<li><code>account_number</code>: arbitrary length number</li>
<li><code>bank_code</code>: nine digit number, as a string, representing the bank code (also known as routing number), e.g. &quot;321174851&quot;</li>
</ul>
<p>If successful, the response object passed to the responseHandler function takes the form:

</p>
<pre><code>{
    "<span class="attribute">bank</span>": <span class="value">{
        "<span class="attribute">account_number_last_four</span>":<span class="value"><span class="string">"0000"</span></span>,
        "<span class="attribute">metadata</span>":<span class="value">{}</span>,"<span class="attribute">id</span>":<span class="value"><span class="string">"BAP5973D36A601F11E29CF3FB337AC0CAB6"</span></span>,
        "<span class="attribute">is_valid</span>":<span class="value"><span class="number">1</span></span>,
        "<span class="attribute">name</span>":<span class="value"><span class="string">"Wells Fargo"</span></span>,
        "<span class="attribute">user_uri</span>":<span class="value"><span class="string">"/v1/users/USR1E0A9BCE5F6111E28F485D097AC0CAB6"</span></span>,
        "<span class="attribute">bank_code_last_four</span>":<span class="value"><span class="string">"4851"</span></span>,
        "<span class="attribute">uri</span>":<span class="value"><span class="string">"/v1/users/USR1E0A9BCE5F6111E28F485D097AC0CAB6/banks/BAP5973D36A601F11E29CF3FB337AC0CAB6"</span>
    </span>}</span>,
    "<span class="attribute">request_id</span>":<span class="value"><span class="string">"REQ5743854A601F11E2B79201347AC0CAB6"</span></span>,
    "<span class="attribute">status</span>":<span class="value"><span class="number">201</span>
</span>}</code></pre>
<p>If not successful, the response object passed to the responseHandler function takes the form:

</p>
<pre><code>{
    <span class="string">"error"</span>: <span class="keyword">...</span> // A string or an object describing the error(s)
    <span class="string">"request_id"</span>: <span class="keyword">...</span> //May or may not be present depending on whether the error was found before or after submitting to the API
    <span class="string">"status"</span>: <span class="keyword">...</span> // HTTP status code
}</code></pre>
<h3 id='tokenizing-sensitive-user-information/client-side-validation-helpers'>Client-side Validation Helpers</h3 id='tokenizing-sensitive-user-information/client-side-validation-helpers'>
<p>These handy functions let you validate user input on the client side, leading to a better overall experience.

</p>
<p><strong>Validating Card Number</strong>

</p>
<p>Checks that the number is formatted correctly and passes the <a href="http://en.wikipedia.org/wiki/Luhn_algorithm" target="_blank">Luhn check</a>. Note that spaces and other punctuation are ignored.

</p>
<pre><code><span class="identifier">crowdtilt</span>.<span class="identifier">isCardNumberValid</span>(<span class="string">'4111111111111111'</span>);      <span class="regexp">//</span> <span class="identifier"><span class="keyword">true</span></span>
<span class="identifier">crowdtilt</span>.<span class="identifier">isCardNumberValid</span>(<span class="string">'4111-1111-1111-1111'</span>);   <span class="regexp">//</span> <span class="identifier"><span class="keyword">true</span></span>
<span class="identifier">crowdtilt</span>.<span class="identifier">isCardNumberValid</span>(<span class="string">'4111 1111 1111 1111'</span>);   <span class="regexp">//</span> <span class="identifier"><span class="keyword">true</span></span>
<span class="identifier">crowdtilt</span>.<span class="identifier">isCardNumberValid</span>(<span class="string">'123456'</span>);                <span class="regexp">//</span> <span class="identifier"><span class="keyword">false</span></span>, <span class="identifier">too</span> <span class="identifier">short</span>
<span class="identifier">crowdtilt</span>.<span class="identifier">isCardNumberValid</span>(<span class="string">'4242-1111-1111-1111'</span>);   <span class="regexp">//</span> <span class="identifier"><span class="keyword">false</span></span>, <span class="identifier">doesn</span><span class="string">'t pass Luhn check</code></pre>
<p><strong>Determining Card Brand</strong>

</p>
<p>Returns the card brand based on the card number

</p>
<pre><code><span class="title">crowdtilt</span>.card.cardType('<span class="number">5105105105105100</span>');   // <span class="type">Mastercard</span>
<span class="title">crowdtilt</span>.card.cardType('<span class="number">4111111111111111</span>');   // <span class="type">VISA</span>
<span class="title">crowdtilt</span>.card.cardType('<span class="number">341111111111111</span>');    // <span class="type">American</span> <span class="type">Express</span>
<span class="title">crowdtilt</span>.card.cardType(<span class="number">0</span>)                     // null</code></pre>
<p><strong>Validating Security Code (CSC)</strong>

</p>
<p>Checks that the security code (also known as CSC or CVC)is properly formatted based on card brand

</p>
<pre><code><span class="title">crowdtilt</span>.card.isSecurityCodeValid('<span class="number">4111111111111111</span>', <span class="number">999</span>)   // true, <span class="type">VISA</span> has a <span class="number">3</span> digit security code
<span class="title">crowdtilt</span>.card.isSecurityCodeValid('<span class="number">4111111111111111</span>', <span class="number">9999</span>)  // false
<span class="title">crowdtilt</span>.card.isSecurityCodeValid('<span class="number">341111111111111</span>', <span class="number">999</span>)    // false, <span class="type">American</span> <span class="type">Express</span> has a <span class="number">4</span> digist security code</code></pre>
<p><strong>Validating Card Expiration</strong>

</p>
<p>Checks if the expiration date is properly formatted and in the future

</p>
<pre><code><span class="identifier">crowdtilt</span>.<span class="identifier">card</span>.<span class="identifier">isExpirationValid</span>(<span class="string">'01'</span>, <span class="string">'2020'</span>);    <span class="regexp">//</span> <span class="identifier"><span class="keyword">true</span></span>
<span class="identifier">crowdtilt</span>.<span class="identifier">card</span>.<span class="identifier">isExpirationValid</span>(<span class="number">1</span>, <span class="number">2010</span>);         <span class="regexp">//</span> <span class="identifier"><span class="keyword">false</span></span></code></pre>
<p><strong>General Card Validation</strong>

</p>
<p>Runs the full set of validation functions, returns an error object that can contain multiple errors

</p>
<pre><code>crowdtilt.card.validate({
    card_number:<span class="comment">'4111111111111112',</span>
    expiration_month: <span class="comment">'01',</span>
    expiration_year: <span class="comment">'2010',</span>
    security_code: <span class="comment">'123'</span>
});</code></pre>
<p>Returns:

</p>
<pre><code><span class="rules">{
    <span class="rule"><span class="attribute">card_number</span>:<span class="value"><span class="string">'"4111111111111112" is not a valid credit card number'</span>,
    expiration:<span class="string">'"01-2010" is not a valid credit card expiration date'</span>
</span>}</span></span></code></pre>
<p><strong>Validating a USA Bank Code (Routing Number)</strong>

</p>
<p>Use ONLY for USA-based bank accounts. Checks against the <a href="http://en.wikipedia.org/wiki/Routing_transit_number#MICR_Routing_number_format" target="_blank">MICR Routing Number Format</a>

</p>
<pre><code><span class="title">crowdtilt</span>.bankAccount.validateUSARoutingNumber('<span class="number">321174851</span>') // passes
<span class="title">crowdtilt</span>.bankAccount.validateUSARoutingNumber('<span class="number">021000021</span>') // passes
<span class="title">crowdtilt</span>.bankAccount.validateUSARoutingNumber('<span class="number">123457890</span>') // fails</code></pre>
<h3 id='tokenizing-sensitive-user-information/tokenization-examples'>Tokenization Examples</h3 id='tokenizing-sensitive-user-information/tokenization-examples'>
<p>Here we include two sample forms, one to collect credit card information and one to collect bank account information.

</p>
<p>Included also is sample javascript to handle the data captured in the forms using <code>crowdtilt.js</code>. We use <a href="http://jquery.com/">jQuery</a> for convenience, but keep in mind that jQuery is not required when using <code>crowdtilt.js</code>.

</p>
<p><strong>Sample Credit Card Form</strong>

</p>
<pre><code><span class="tag">&lt;<span class="title">form</span> <span class="attribute">action</span>=<span class="value">"#"</span> <span class="attribute">method</span>=<span class="value">"POST"</span> "<span class="attribute">id</span>=<span class="value">"cardForm"</span>></span>
    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"hidden"</span> <span class="attribute">name</span>=<span class="value">"user_id"</span>></span>           
    <span class="tag">&lt;<span class="title">fieldset</span>></span>
        <span class="tag">&lt;<span class="title">label</span>></span>Card Number<span class="tag">&lt;/<span class="title">label</span>></span>
        <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"card_number"</span> <span class="attribute">autocomplete</span>=<span class="value">"off"</span>></span>
    <span class="tag">&lt;/<span class="title">fieldset</span>></span>
    <span class="tag">&lt;<span class="title">fieldset</span>></span>
        <span class="tag">&lt;<span class="title">label</span>></span>Expiration<span class="tag">&lt;/<span class="title">label</span>></span>             
        <span class="tag">&lt;<span class="title">select</span> <span class="attribute">name</span>=<span class="value">"expiration_month"</span> <span class="attribute">style</span>=<span class="value">"width:50px"</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"01"</span> <span class="attribute">selected</span>></span>01<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"02"</span>></span>02<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"03"</span>></span>03<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"04"</span>></span>04<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"05"</span>></span>05<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"06"</span>></span>06<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"07"</span>></span>07<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"08"</span>></span>08<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"09"</span>></span>09<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"10"</span>></span>10<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"11"</span>></span>11<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"12"</span>></span>12<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;/<span class="title">select</span>></span>
            / 
        <span class="tag">&lt;<span class="title">select</span> <span class="attribute">name</span>=<span class="value">"expiration_year"</span> <span class="attribute">style</span>=<span class="value">"width:75px"</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"2013"</span> <span class="attribute">selected</span>></span>2013<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"2014"</span>></span>2014<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"2015"</span>></span>2015<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"2016"</span>></span>2016<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"2017"</span>></span>2017<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"2018"</span>></span>2018<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"2019"</span>></span>2019<span class="tag">&lt;/<span class="title">option</span>></span>
            <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"2020"</span>></span>2020<span class="tag">&lt;/<span class="title">option</span>></span>
        <span class="tag">&lt;/<span class="title">select</span>></span>
    <span class="tag">&lt;/<span class="title">fieldset</span>></span>
    <span class="tag">&lt;<span class="title">fieldset</span>></span>
        <span class="tag">&lt;<span class="title">label</span>></span>Security Code<span class="tag">&lt;/<span class="title">label</span>></span>
        <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"security_code"</span> <span class="attribute">autocomplete</span>=<span class="value">"off"</span>></span>
    <span class="tag">&lt;/<span class="title">fieldset</span>></span>
    <span class="tag">&lt;<span class="title">button</span> <span class="attribute">type</span>=<span class="value">"submit"</span>></span>submit<span class="tag">&lt;/<span class="title">button</span>></span>
<span class="tag">&lt;/<span class="title">form</span>></span></code></pre>
<p><strong>Sample Bank Account Form</strong>

</p>
<pre><code><span class="tag">&lt;<span class="title">form</span> <span class="attribute">action</span>=<span class="value">"#"</span> <span class="attribute">method</span>=<span class="value">"POST"</span> <span class="attribute">id</span>=<span class="value">"bankForm"</span>></span>
    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"hidden"</span> <span class="attribute">name</span>=<span class="value">"user_id"</span>></span>      
    <span class="tag">&lt;<span class="title">fieldset</span>></span>
        <span class="tag">&lt;<span class="title">label</span>></span>Bank Name<span class="tag">&lt;/<span class="title">label</span>></span>
        <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"name"</span>></span>
    <span class="tag">&lt;/<span class="title">fieldset</span>></span>
    <span class="tag">&lt;<span class="title">fieldset</span>></span>
        <span class="tag">&lt;<span class="title">label</span>></span>Account Number<span class="tag">&lt;/<span class="title">label</span>></span>
        <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"account_number"</span> <span class="attribute">autocomplete</span>=<span class="value">"off"</span>></span>
    <span class="tag">&lt;/<span class="title">fieldset</span>></span>
    <span class="tag">&lt;<span class="title">fieldset</span>></span>
        <span class="tag">&lt;<span class="title">label</span>></span>Bank Code (Routing Number in USA)<span class="tag">&lt;/<span class="title">label</span>></span>
        <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"bank_code"</span>></span>
    <span class="tag">&lt;/<span class="title">fieldset</span>></span>

    <span class="tag">&lt;<span class="title">button</span> <span class="attribute">type</span>=<span class="value">"submit"</span>></span>submit<span class="tag">&lt;/<span class="title">button</span>></span>
<span class="tag">&lt;/<span class="title">form</span>></span></code></pre>
<p><strong>Sample Javascript</strong>

</p>
<pre><code><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>></span><span class="javascript">
    (<span class="keyword">function</span>() {    

        <span class="comment">//Initialize the crowdtilt object</span>
        crowdtilt.init();

        <span class="keyword">var</span> responseHandler = <span class="keyword">function</span>(response) {
            <span class="keyword">switch</span> (response.status) {
               <span class="keyword">case</span> <span class="number">201</span>:
                   <span class="comment">// The card or bank was created successfully!</span>
                   <span class="comment">// Submit the data contained in response.card or repsonse.bank to your server for saving</span>
                   <span class="comment">// For bank accounts, remember to set the new account as the default in addition to saving it to your database</span>
                   <span class="keyword">break</span>;
               <span class="keyword">case</span> <span class="number">400</span>:
                   <span class="comment">// missing field - check response.error for details</span>
                   <span class="keyword">break</span>;
               <span class="keyword">case</span> <span class="number">404</span>:
                   <span class="comment">// your user_id is incorrect (no user was found)</span>
                   <span class="keyword">break</span>;
               <span class="keyword">default</span>:
                   <span class="comment">// Some other error ocurred, check response.error for details</span>
            }
        }

        <span class="keyword">var</span> tokenizeCard = <span class="keyword">function</span>(e) {
            e.preventDefault();

            <span class="keyword">var</span> $form = $(<span class="string">'form#cardForm'</span>);
            <span class="keyword">var</span> cardData = {
                number: $form.find(<span class="string">'[name="card_number"]'</span>).val(),
                expiration_month: $form.find(<span class="string">'[name="expiration_month"]'</span>).val(),
                expiration_year: $form.find(<span class="string">'[name="expiration_year"]'</span>).val(),
                security_code: $form.find(<span class="string">'[name="security_code"]'</span>).val()
            };
            <span class="keyword">var</span> user_id = $form.find(<span class="string">'[name="user_id"]'</span>).val();

            crowdtilt.card.create(user_id, cardData, callback);
        };
        $(<span class="string">'#cardForm'</span>).submit(tokenizeCard);        

        <span class="keyword">var</span> tokenizeBankAccount = <span class="keyword">function</span>(e) {
            e.preventDefault();

            <span class="keyword">var</span> $form = $(<span class="string">'form#bankForm'</span>);
            <span class="keyword">var</span> bankAccountData = {
                name: $form.find(<span class="string">'[name="name"]'</span>).val(),
                account_number: $form.find(<span class="string">'[name="account_number"]'</span>).val(),
                bank_code: $form.find(<span class="string">'[name="bank_code"]'</span>).val()
            };
            <span class="keyword">var</span> user_id = $form.find(<span class="string">'[name="user_id"]'</span>).val();

            crowdtilt.bank.create(user_id, bankAccountData, callback);
        };
        $(<span class="string">'#bankForm'</span>).submit(tokenizeBankAccount);
    })();
</span><span class="tag">&lt;/<span class="title">script</span>></span></code></pre>
<h2 id='resource-definitions'>Resource Definitions</h2 id='resource-definitions'>
<p>This section outlines the full definition of our resources.


</p>
<h2 id='user-definition'>User Definition</h2 id='user-definition'>
<table>
    <thead>
        <tr>
            <th>Attribute</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>id</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>A unique identifier for the user</td>
        </tr>
        <tr>
            <td>email</td>
            <td>string</td>
            <td>Yes</td>
            <td>Email address</td>
        </tr>
        <tr>
            <td>firstname</td>
            <td>string</td>
            <td>Yes</td>
            <td>The first name of the user</td>
        </tr>
        <tr>
            <td>lastname</td>
            <td>string</td>
            <td>Yes</td>
            <td>The last name of the user</td>
        </tr>
        <tr>
            <td>is_verified</td>
            <td>integer</td>
            <td>Auto generated and read-only</td>
            <td>Whether this user is verified to receive money</td>
        </tr>
        <tr>
            <td>img</td>
            <td>string</td>
            <td>No</td>
            <td>A url for user&#39;s image</td>
        </tr>
        <tr>
            <td>creation_date</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>It is ISO8601 DateTime format</td>
        </tr>
        <tr>
            <td>last_login_date</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>
                It is ISO8601 DateTime format, updated when a user
                is authenticated.
            </td>
        </tr>
        <tr>
            <td>metadata</td>
            <td>JSON object</td>
            <td>No</td>
            <td>Key-Value pair for any extra data the API consumer wants to store.</td>
        </tr>
        <tr>
            <td>uri</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>The uri for this user resource</td>
        </tr>
        <tr>
            <td>campaigns_uri</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>The uri for listing user&#39;s campaigns</td>
        </tr>
        <tr>
            <td>paid_campaigns_uri</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>The uri for listing the campaigns the user paid for</td>
        </tr>
        <tr>
            <td>payments_uri</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>The uri for the user&#39;s payments</td>
        </tr>
    </tbody>
</table>


<h2 id='bank-definition'>Bank Definition</h2 id='bank-definition'>
<table>
    <thead>
        <tr>
            <th>Attribute</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>id</td>
            <td>String</td>
            <td>Auto generated and read-only</td>
            <td>A unique identifier for the bank</td>
        </tr>
        <tr>
            <td>default</td>
            <td>Integer (1 or 0)</td>
            <td>Read-only</td>
            <td> Tells you if this bank is currently the default for the user </td>
        </tr>
        <tr>
            <td>account_number</td>
            <td>string</td>
            <td>Yes, not returned</td>
            <td> Bank Account Number </td>
        </tr>
        <tr>
            <td>account_number_last_four</td>
            <td>string</td>
            <td>Read-Only</td>
            <td>Last four digits of account nummber</td>
        </tr>
        <tr>
            <td>bank_code</td>
            <td>string</td>
            <td>Yes, not returned</td>
            <td> Bank Routing Code </td>
        </tr>
        <tr>
            <td>bank_code_last_four</td>
            <td>string</td>
            <td>Read-Only</td>
            <td>Last four digits of bank routing nummber</td>
        </tr>
        <tr>
            <td>name</td>
            <td>String</td>
            <td>No</td>
            <td> The name of this bank account </td>
        </tr>
        <tr>
            <td>user</td>
            <td>JSON object</td>
            <td>Read-Only</td>
            <td> The user object that owns this bank</td>
        </tr>
        <tr>
            <td>metadata</td>
            <td>JSON object</td>
            <td>No</td>
            <td>Key-Value pair for any extra data the API consumer wants to store.</td>
        </tr>
        <tr>
            <td>uri</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>The uri for this user resource</td>
        </tr>
    </tbody>
</table>


<h2 id='campaign-definition'>Campaign Definition</h2 id='campaign-definition'>
<table>
    <thead>
        <tr>
            <th>Attribute</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>id</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>A unique identifier for the campaign</td>
        </tr>
        <tr>
            <td>user_id</td>
            <td>string</td>
            <td>Yes</td>
            <td>The id of the campaign admin</td>
        </tr>
        <tr>
            <td>title</td>
            <td>string</td>
            <td>Yes</td>
            <td>The title of the campaign</td>
        </tr>
        <tr>
            <td>description</td>
            <td>string</td>
            <td>Yes</td>
            <td>The description of the campaign</td>
        </tr>
        <tr>
            <td>img</td>
            <td>string</td>
            <td>No</td>
            <td>A URI to an image to be used for the campaign</td>
        </tr>
        <tr>
            <td>is_expired</td>
            <td>number</td>
            <td>No</td>
            <td>Whether or not the campaign is expired
                <table>
                    <tr>
                        <td>Value</td>
                        <td>Description</td>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>Not Expired</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Expired</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>privacy</td>
            <td>number</td>
            <td>No</td>
            <td>The privacy settings for the campaign. It defaults to 1.
            Available values
                <table>
                    <tr>
                        <td>Value</td>
                        <td>Description</td>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>public</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>private</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>tilt_amount</td>
            <td>number</td>
            <td>Yes</td>
            <td>The amount required to tilt the campaign. This amount is in
            cents. After the campaign raises enough funds equal or more than
            this amount, the credit cards will get charged. Before that, cards
            are authorized only.
            </td>
        </tr>
        <tr>
            <td>min_payment_amount</td>
            <td>number</td>
            <td>No</td>
            <td>The minimum amount for a single payment. This amount is in
            cents.</td>
        </tr>
        <tr>
            <td>fixed_payment_amount</td>
            <td>number</td>
            <td>No</td>
            <td>If this amount is set, each payment will have to be exactly
            this amount or multiples of it. This amount is in cents.</td>
        </tr>
        <tr>
            <td>expiration_date</td>
            <td>String. ISO8601 DateTime format</td>
            <td>Yes</td>
            <td>The expiration date of the campaign</td>
        </tr>
        <tr>
            <td>creation_date</td>
            <td>String. ISO8601 DateTime format</td>
            <td>Auto generated and read-only</td>
            <td>The creation date of the campaign</td>
        </tr>
        <tr>
            <td>modification_date</td>
            <td>String. ISO8601 DateTime format</td>
            <td>Auto generated and read-only</td>
            <td>The modification date of the campaign</td>
        </tr>
        <tr>
            <td>is_tilted</td>
            <td>number</td>
            <td>Read-only</td>
            <td>Indicates whether or not the campaign has tilted</td>
        </tr>
        <tr>
            <td>is_paid</td>
            <td>number</td>
            <td>Read-only</td>
            <td>Indicates whether or not the campaign funds has been paid to the
            admin</td>
        </tr>
        <tr>
            <td>type</td>
            <td>number</td>
            <td>No</td>
            <td>The type of the campaign. Available values
                <table>
                    <tr>
                        <td>Value</td>
                        <td>Description</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Friendly</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>non-profit</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>tax_id</td>
            <td>string</td>
            <td>No</td>
            <td>The EIN for a business or non-profit organization. This
            attribute is required only if the campaign type is a non-profit.
            </td>
        </tr>
        <tr>
            <td>tax_name</td>
            <td>string</td>
            <td>No</td>
            <td>The name of the business or non-profit</td>
        </tr>
        <tr>
            <td>admin</td>
            <td>JSON User object</td>
            <td>Auto generated and read-only</td>
            <td>This campaign&#39;s admin</td>
        </tr>
        <tr>
            <td>tilter</td>
            <td>JSON User object</td>
            <td>Auto generated and read-only</td>
            <td>This campaign&#39;s tilter (if tilted)</td>
        </tr>
        <tr>
            <td>first_contributor</td>
            <td>JSON User object</td>
            <td>Auto generated and read-only</td>
            <td>This campaign&#39;s first contributor</td>
        </tr>
        <tr>
            <td>uri</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>The uri for this campaign resource</td>
        </tr>
        <tr>
            <td>payments_uri</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>The uri for the payments on this campaign</td>
        </tr>
        <tr>
            <td>settlements_uri</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>The uri with the settlements for this campaign</td>
        </tr>
        <tr>
            <td>metadata</td>
            <td>JSON object</td>
            <td>No</td>
            <td>Key-Value pair for any extra data the API consumer wants to store.</td>
        </tr>
        <tr>
            <td>stats</td>
            <td>JSON object</td>
            <td>No</td>
            <td>Statistics information about the campaign.</td>
        </tr>
    </tbody>
</table>


<h2 id='payment-definition'>Payment Definition</h2 id='payment-definition'>
<table>
    <thead>
        <tr>
            <th>Attribute</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>id</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>A unique identifier for the payment</td>
        </tr>
        <tr>
            <td>amount</td>
            <td>number</td>
            <td>Yes</td>
            <td>
                The amount of this payment that will go towards the campaign
            </td>
        </tr>
        <tr>
            <td>user_fee_amount</td>
            <td>number</td>
            <td>Yes</td>
            <td>
                The amount to charge the user (payer) for this contribution.
                This amount will be <em>added</em> to the <code>amount</code> value when
                determining what will be charged to the users card.
                The full charge amount will be <code>amount</code> + <code>user_fee_amount</code>.
            </td>
        </tr>
        <tr>
            <td>admin_fee_amount</td>
            <td>number</td>
            <td>Yes</td>
            <td>
                The amount to charge the admin of the campaign for this
                contribution.  This value does <em>not</em> affect the amount charged
                to the user, but instead affects how much of the <code>amount</code> value
                goes to the campaign admin.  The admin will get <code>amount</code> -
                <code>admin_fee_amount</code> from this contribution when the campaign
                tilts and expires.
            </td>
        </tr>
        <tr>
            <td>status</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>Reflects the status of the payment. Available values:
                <table>
                    <tr>
                        <td>authorized</td>
                    </tr>
                    <tr>
                        <td>charged</td>
                    </tr>
                    <tr>
                        <td>refunded</td>
                    </tr>
                    <tr>
                        <td>rejected</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>creation_date</td>
            <td>String. ISO8601 DateTime format</td>
            <td>Auto generated and read-only</td>
            <td>The creation date of the payment</td>
        </tr>
        <tr>
            <td>modification_date</td>
            <td>String. ISO8601 DateTime format</td>
            <td>Auto generated and read-only</td>
            <td>The modification date of the payment</td>
        </tr>
        <tr>
            <td>uri</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>The uri for this campaign resource</td>
        </tr>
        <tr>
            <td>user</td>
            <td>JSON User object</td>
            <td>Auto generated and read-only</td>
            <td>The contributor of this payment</td>
        </tr>
        <tr>
            <td>card</td>
            <td>JSON Card object</td>
            <td>Auto generated and read-only</td>
            <td>The card used for this payment</td>
        </tr>
        <tr>
            <td>campaign</td>
            <td>JSON Campaign object</td>
            <td>Auto generated and read-only</td>
            <td>The campaign this payment is for</td>
        </tr>
        <tr>
            <td>metadata</td>
            <td>JSON object</td>
            <td>No</td>
            <td>Key-Value pair for any extra data the API consumer wants to store.</td>
        </tr>
    </tbody>
</table>


<h2 id='settlement-definition'>Settlement Definition</h2 id='settlement-definition'>
<table>
    <thead>
        <tr>
            <th>Attribute</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>id</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>A unique identifier for the payment</td>
        </tr>
        <tr>
            <td>admin_amount</td>
            <td>number</td>
            <td>Auto generated and read-only</td>
            <td>
                The amount of this payment that is going to the admin bank
                account (the bank account shown in the <code>bank</code> sub-object).
            </td>
        </tr>
        <tr>
            <td>escrow_amount</td>
            <td>number</td>
            <td>Auto generated and read-only</td>
            <td>
                The amount of this payment that is going into the API Users
                escrow account.
            </td>
        </tr>
        <tr>
            <td>status</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>Reflects the status of the settlement. Available values:
                <table>
                    <tr>
                        <td>Value</td>
                        <td>Description</td>
                    </tr>
                    <tr>
                        <td>needs bank account</td>
                        <td>Cannot submit until bank account is added</td>
                    </tr>
                    <tr>
                        <td>pending</td>
                        <td>Settlement has been sent and is pending</td>
                    </tr>
                    <tr>
                        <td>rejected</td>
                        <td>
                            Settlement was rejected, usually due to invalid
                            bank account information
                        </td>
                    </tr>
                    <tr>
                        <td>re-sent pending</td>
                        <td>
                            Pending again after a re-try if this
                            settlement was previously rejected
                        </td>
                    </tr>
                    <tr>
                        <td>cleared</td>
                        <td>
                            The settlement has successfully cleared
                            the users bank account.
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>creation_date</td>
            <td>String. ISO8601 DateTime format</td>
            <td>Auto generated and read-only</td>
            <td>The creation date of the settlement</td>
        </tr>
        <tr>
            <td>modification_date</td>
            <td>String. ISO8601 DateTime format</td>
            <td>Auto generated and read-only</td>
            <td>The modification date of the settlement</td>
        </tr>
        <tr>
            <td>uri</td>
            <td>string</td>
            <td>Auto generated and read-only</td>
            <td>The uri for this settlement</td>
        </tr>
        <tr>
            <td>user</td>
            <td>JSON User object</td>
            <td>Auto generated and read-only</td>
            <td>The user who received this settlement</td>
        </tr>
        <tr>
            <td>bank</td>
            <td>JSON Bank object</td>
            <td>Auto generated and read-only</td>
            <td>The bank account that received this settlement</td>
        </tr>
        <tr>
            <td>campaign</td>
            <td>JSON Campaign object</td>
            <td>Auto generated and read-only</td>
            <td>The campaign this payment is for</td>
        </tr>
        <tr>
            <td>metadata</td>
            <td>JSON object</td>
            <td>No</td>
            <td>Key-Value pair for any extra data the API consumer wants to store.</td>
        </tr>
    </tbody>
</table>


<h1>Pagination</h1>
<p>All <code>GET</code> requests on collection resources has pagination enabled with a default
of <strong>50</strong> entries per page. For example:

</p>
<pre><code>GET /users

{
    <span class="string">"pagination"</span>: {
        <span class="string">"total_pages"</span>: 2,
        <span class="string">"page"</span>: 1,
        <span class="string">"total_entries"</span>: 100,
        <span class="string">"per_page"</span>: 50
    },
    <span class="string">"users"</span>:<span class="sqbracket"> [
        {
            "id": "USREC5",
            "email": "foo.bar@gmail.com",
            "firstname": "Foo",
            "lastname": "Bar",
            "img": "https://example.com/profile.png",
            "is_verified": 1,
            "creation_date": "2011-07-02T14:20:48Z",
            "last_login_date": "2012-09-22T01:55:49Z",
            "uri": "/v1/users/USREC5",
            "campaigns_uri": "/v1/users/USREC5/campaigns",
            "paid_campaigns_uri": "/v1/users/USREC5/paid_campaigns",
            "payments_uri": "/v1/users/USREC5/payments",
            "metadata": {}
        },
        .
        .
        .
    ]</span>
}</code></pre>
<p>The default limits can be changed with <code>per_page</code> and <code>page</code> request
parameters. For example:

</p>
<pre><code><span class="title">GET</span> /users?page=<span class="number">2</span>&amp;per_page=<span class="number">10</span></code></pre>

  </div>
</div></body>
</html>